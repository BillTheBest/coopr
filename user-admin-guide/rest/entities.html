<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-27787617-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <title>REST API: Importing &amp; Exporting Cluster Templates &mdash; Loom 0.9.5 Beta documentation</title>
    
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.9.5 Beta',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Loom 0.9.5 Beta documentation" href="../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="../index.html">Loom 0.9.5 Beta documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="rest-api-importing-exporting-cluster-templates">
<h1>REST API: Importing &amp; Exporting Cluster Templates<a class="headerlink" href="#rest-api-importing-exporting-cluster-templates" title="Permalink to this headline">¶</a></h1>
<p><a class="reference internal" href="index.html"><em>REST Overview</em></a> |
<a class="reference internal" href="provider.html"><em>Providers</em></a> |
<a class="reference internal" href="hardware.html"><em>Hardware Types</em></a> |
<a class="reference internal" href="image.html"><em>Image Types</em></a> |
<a class="reference internal" href="services.html"><em>Services</em></a> |
<a class="reference internal" href="templates.html"><em>Cluster Template</em></a> |
<a class="reference internal" href=""><em>Importing &amp; Exporting</em></a> |
<a class="reference internal" href="clusters.html"><em>Clusters</em></a> |
<a class="reference internal" href="tasks.html"><em>Tasks</em></a></p>
<p>Loom REST APIs allow you to export all Providers, Hardware Types, Image Types, Services, and Cluster Templates created in a Loom server into a JSON Object that can then be imported into another Loom server.</p>
<div class="section" id="export-template-metadata">
<h2>Export Template Metadata<a class="headerlink" href="#export-template-metadata" title="Permalink to this headline">¶</a></h2>
<p>To export all entities from a Loom server, make a HTTP GET request to URI:</p>
<div class="highlight-python"><div class="highlight"><pre>/export
</pre></div>
</div>
<p>The response is a JSON Object with keys for providers, hardwaretypes, imagetypes, services, and clustertemplates.  Each key has a JSON array as its value, with each element in the array as the json representation as described in the corresponding sections for providers, hardware types, image types, services, and cluster templates.</p>
<div class="section" id="http-responses">
<h3>HTTP Responses<a class="headerlink" href="#http-responses" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="60%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Status Code</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>200 (OK)</td>
<td>Successfully created</td>
</tr>
<tr class="row-odd"><td>401 (UNAUTHORIZED)</td>
<td>The user is unauthorized and cannot perform an export.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>curl -H <span class="s1">&#39;X-Loom-UserID:admin&#39;</span>
       -H <span class="s1">&#39;X-Loom-ApiKey:&lt;apikey&gt;&#39;</span>
       http://&lt;loom-server&gt;:&lt;loom-port&gt;/&lt;version&gt;/loom/export
  <span class="o">{</span>
    <span class="s2">&quot;providers&quot;</span>:<span class="o">[</span> ... <span class="o">]</span>,
    <span class="s2">&quot;hardwaretypes&quot;</span>:<span class="o">[</span> ... <span class="o">]</span>,
    <span class="s2">&quot;imagetypes&quot;</span>:<span class="o">[</span> ... <span class="o">]</span>,
    <span class="s2">&quot;services&quot;</span>:<span class="o">[</span> ... <span class="o">]</span>,
    <span class="s2">&quot;clustertemplates&quot;</span>:<span class="o">[</span> ... <span class="o">]</span>
  <span class="o">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="import-template-metadata">
<h2>Import Template Metadata<a class="headerlink" href="#import-template-metadata" title="Permalink to this headline">¶</a></h2>
<p>To import entities into a Loom server, make a POST HTTP request to URI:</p>
<div class="highlight-python"><div class="highlight"><pre>/import
</pre></div>
</div>
<p>The post body must be a JSON object of the same format as the export result.  It has a key for providers, hardwaretypes, imagetypes, services, and clustertemplates.  The value for each key is a JSON array, with each element in the array as a JSON object representation of the corresponding entity.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Imports will wipe out all existing entities from a Loom server, replacing everything with the entities given in the post body.</p>
</div>
<div class="section" id="id1">
<h3>HTTP Responses<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="60%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Status Code</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>200 (OK)</td>
<td>Successful</td>
</tr>
<tr class="row-odd"><td>403 (FORBIDDEN)</td>
<td>If a non-admin user tries to import entities into the server.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id2">
<h3>Example<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>curl -X POST
       -H <span class="s1">&#39;X-Loom-UserID:admin&#39;</span>
       -H <span class="s1">&#39;X-Loom-ApiKey:&lt;apikey&gt;&#39;</span>
       -d <span class="s1">&#39;{</span>
<span class="s1">             &quot;providers&quot;:[...],</span>
<span class="s1">             &quot;imagetypes&quot;:[...],</span>
<span class="s1">             &quot;hardwaretypes&quot;:[...],</span>
<span class="s1">             &quot;services&quot;:[...],</span>
<span class="s1">             &quot;clustertemplates&quot;:[...]</span>
<span class="s1">           }&#39;</span> http://&lt;loom-server&gt;:&lt;loom-port&gt;/&lt;version&gt;/loom/import
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/quickstart/index.html">Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/admin/index.html">Administration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/user/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html">Web Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">FAQs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/release-notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/glossary.html">Glossary</a></li>
</ul>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li><a href="../index.html">Loom 0.9.5 Beta documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Continuuity Inc..
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.1.
    </div>
  </body>
</html>