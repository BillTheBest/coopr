<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-27787617-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <title>Loom Provisioner &mdash; Loom 0.9.5 Beta documentation</title>
    
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.9.5 Beta',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Loom 0.9.5 Beta documentation" href="../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="../index.html">Loom 0.9.5 Beta documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <span class="target" id="faq-toplevel"></span><div class="section" id="loom-provisioner">
<h1>Loom Provisioner<a class="headerlink" href="#loom-provisioner" title="Permalink to this headline">¶</a></h1>
<div class="section" id="when-something-goes-wrong-how-can-i-look-at-the-logs">
<h2>When something goes wrong, how can I look at the logs?<a class="headerlink" href="#when-something-goes-wrong-how-can-i-look-at-the-logs" title="Permalink to this headline">¶</a></h2>
<p>When a user provisions a cluster, the logs for the nodes that fail are reported at node level, making
it easier to investigate the node level errors.</p>
</div>
<div class="section" id="how-many-provisioners-should-i-run">
<h2>How many provisioners should I run?<a class="headerlink" href="#how-many-provisioners-should-i-run" title="Permalink to this headline">¶</a></h2>
<p>A good rule of thumb is:</p>
<p>C * N * n / S</p>
<p>Where:</p>
<p>C = Number of concurrent cluster creations you need to support</p>
<p>N = Average number of nodes per cluster</p>
<p>n = Average number of services per cluster node</p>
<p>S = Average total number of services in a cluster</p>
<p>Since only one operation can be running on a node at any given time, you will never need more provisioners
than the number of concurrent node creations you need to support. However, because work on a cluster is broken up into stages, and because
not all cluster nodes will be busy in each stage, it is usually fine to have less than the total number of created nodes.
The formula above tries to capture the average number of tasks per cluster creation stage times the number of clusters being created at any given time.</p>
<p>For example, if you need to support 10 concurrent cluster creations, on average each node across the clusters
contains 4 services, on average each cluster contains 8 services, and each cluster is on average 10 nodes
in size, so a good starting point is 10 * 10 * 4 / 8 = 50 provisioners.  Ultimately, if your provisioners are always busy, you probably want to add more.
If they are mostly idle, you probably want to decrease number. With a lot of provisioners, you will want to edit the number of worker threads in the loom server accordingly.</p>
<p>Memory limits should also be considered when deciding on the number of provisioners to run. On average, each provisioner
requires roughly 200MB of memory, hence, you may want to consider your system specifications
when allocating the number of provisioners.</p>
</div>
<div class="section" id="can-i-increase-the-number-of-provisioners-on-the-fly">
<h2>Can I increase the number of provisioners on the fly?<a class="headerlink" href="#can-i-increase-the-number-of-provisioners-on-the-fly" title="Permalink to this headline">¶</a></h2>
<p>No, you can&#8217;t in this release. We intend to support it in a future release.</p>
</div>
<div class="section" id="how-many-resources-does-each-provisioner-need">
<h2>How many resources does each provisioner need?<a class="headerlink" href="#how-many-resources-does-each-provisioner-need" title="Permalink to this headline">¶</a></h2>
<p>Provisioners are very light-weight daemons. They are state-less and require less
amount of memory. Nor are they CPU bound. For most of the time, they are idle, waiting for operations to
finish on a remote host. Currently, each Provisioner can handle one task at a time. In future releases,
the Provisioner will support performing multiple tasks currently.</p>
</div>
<div class="section" id="is-it-possible-for-multiple-provisioners-to-perform-operations-on-the-same-node-at-the-same-time">
<h2>Is it possible for multiple provisioners to perform operations on the same node at the same time?<a class="headerlink" href="#is-it-possible-for-multiple-provisioners-to-perform-operations-on-the-same-node-at-the-same-time" title="Permalink to this headline">¶</a></h2>
<p>During normal operations, there is only one Provisioner performing operation on the machine. In case
of failure, the previous operation would be timed out, and a new operation would be started.</p>
</div>
<div class="section" id="can-i-run-different-types-of-provisioners-at-the-same-time">
<h2>Can I run different types of provisioners at the same time?<a class="headerlink" href="#can-i-run-different-types-of-provisioners-at-the-same-time" title="Permalink to this headline">¶</a></h2>
<p>Currently, the system doesn&#8217;t support registration of multiple types of provisoners. All Provisioners are currently
expected to be of the same type.</p>
</div>
<div class="section" id="can-i-customize-provisioners">
<h2>Can I customize provisioners?<a class="headerlink" href="#can-i-customize-provisioners" title="Permalink to this headline">¶</a></h2>
<p>Yes, you can. Please look for more information <a class="reference internal" href="../guide/admin/plugins.html"><em>here</em></a></p>
</div>
<div class="section" id="what-happens-when-i-stop-a-provisioner-while-it-is-performing-a-task">
<h2>What happens when I stop a provisioner while it is performing a task?<a class="headerlink" href="#what-happens-when-i-stop-a-provisioner-while-it-is-performing-a-task" title="Permalink to this headline">¶</a></h2>
<p>The provisioner will attempt to finish any task it is performing before stopping.  This means it may take minutes
before a provisioner shuts itself down after receiving a kill signal.</p>
</div>
<div class="section" id="can-the-chef-automator-use-a-chef-server">
<h2>Can the chef-automator use a Chef server ?<a class="headerlink" href="#can-the-chef-automator-use-a-chef-server" title="Permalink to this headline">¶</a></h2>
<p>Currently, it does not. The current version uses only chef-solo, however, future version of Loom will support both chef-solo and
chef-client.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/quickstart/index.html">Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/admin/index.html">Administration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/user/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rest/index.html">Web Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html">FAQs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/release-notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/glossary.html">Glossary</a></li>
</ul>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li><a href="../index.html">Loom 0.9.5 Beta documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Continuuity Inc..
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.1.
    </div>
  </body>
</html>