<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-27787617-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <title>JBoss Application Server &mdash; Loom 0.9.5 Beta documentation</title>
    
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.9.5 Beta',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Loom 0.9.5 Beta documentation" href="../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="../index.html">Loom 0.9.5 Beta documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="jboss-application-server">
<h1>JBoss Application Server<a class="headerlink" href="#jboss-application-server" title="Permalink to this headline">¶</a></h1>
<p>This document describes how to install and configure JBoss Application Server (AS) and template with Loom in less than 10 minutes.
JBoss AS is an open source Java Application Server. For more information please visit the <a class="reference external" href="http://www.jboss.org/jbossas">JBoss AS site</a></p>
<div class="section" id="prerequisite">
<h2>Prerequisite<a class="headerlink" href="#prerequisite" title="Permalink to this headline">¶</a></h2>
<p>Before getting started, export the following helper variables according to your specific environment:</p>
<div class="highlight-python"><div class="highlight"><pre>$ export REMOTE_LOOM_PLUGINS=&quot;http://tools.continuuity.com/downloads/loom/plugins&quot;
$ export LOOM_SHELL_AUTOMATORS=&quot;/opt/loom/provisioner/daemon/plugins/automators/shell_automator&quot;
$ export LOOM_SERVER_HOST=&lt;loom-server&gt;
$ export LOOM_SERVER_PORT=&lt;loom-port&gt;
</pre></div>
</div>
</div>
<div class="section" id="download-and-install-loom-jboss-automator-scripts">
<h2>Download and Install Loom JBoss Automator Scripts<a class="headerlink" href="#download-and-install-loom-jboss-automator-scripts" title="Permalink to this headline">¶</a></h2>
<p>The JBoss Automator Scripts bundle contains a shell script plugin to install and configure JBoss AS on a node within a cluster. It also contains and configures a &#8216;HelloWorld&#8217; application.</p>
<p>On every Loom provisioner node, download and install the JBoss bundle into the Loom shell automators directory:</p>
<div class="highlight-python"><div class="highlight"><pre>$ curl -o /tmp/jboss-automator-scripts-0.1.0.tgz  \
   $REMOTE_LOOM_PLUGINS/jboss-automator-scripts-0.1.0.tgz
$ sudo tar xvf /tmp/jboss-automator-scripts-0.1.0.tgz -C $LOOM_SHELL_AUTOMATORS/scripts
</pre></div>
</div>
</div>
<div class="section" id="verify-installation">
<h2>Verify Installation<a class="headerlink" href="#verify-installation" title="Permalink to this headline">¶</a></h2>
<p>After the JBoss bundle is installed, you should see the following directory structure:</p>
<div class="highlight-python"><div class="highlight"><pre>/opt/loom/provisioner/daemon/plugins/automators/shell_automator/scripts$ ls -tlr
total 24
-rwxrwxr-x 1 loom loom  629 Feb 14 22:15 loom_service_runner.sh
-rwxrwxr-x 1 loom loom  962 Feb 27 01:40 chef_client_bootstrap.sh
drwxr-xr-x 2 loom loom 4096 Mar  8 09:20 jboss-apps          [Directory of Apps]
-rwxr-xr-x 1 loom loom 8010 Mar  8 10:38 jboss-installer     [Installer]
/opt/loom/provisioner/daemon/plugins/automators/shell_automator/scripts$
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">More JBoss applications can be added to the &#8216;jboss-apps&#8217; directory and will be installed into the &#8216;$JBOSS_HOME/standalone/deployments&#8217; directory by default.</p>
</div>
</div>
<div class="section" id="configure-oracle-java-7-service-in-loom">
<h2>Configure Oracle Java 7 Service in Loom<a class="headerlink" href="#configure-oracle-java-7-service-in-loom" title="Permalink to this headline">¶</a></h2>
<p>JBoss AS requires Oracle Java 7. The following will add a service to Loom for installing and configuring Java:</p>
<div class="highlight-python"><div class="highlight"><pre>$ curl -o /tmp/oracle-java-7 $REMOTE_LOOM_PLUGINS/jboss/services/oracle-java-7
$ curl -X POST -H &quot;X-Loom-UserId:admin&quot;\
    -d @/tmp/oracle-java-7 http://$LOOM_SERVER:$LOOM_PORT/v1/loom/services
</pre></div>
</div>
</div>
<div class="section" id="configure-jboss-as-service-in-loom">
<h2>Configure JBoss AS Service in Loom<a class="headerlink" href="#configure-jboss-as-service-in-loom" title="Permalink to this headline">¶</a></h2>
<p>Now that we have installed the scripts and dependent services, we must configure the JBoss AS service within Loom and then define a cluster template to enable Loom provisioning of JBoss AS clusters.
This configuration can be achieved using either the Loom Admin UI or Webservices.</p>
<p>The following adds service &#8216;jboss&#8217; to the service list.</p>
<div class="highlight-python"><div class="highlight"><pre>$ curl -o /tmp/jboss $REMOTE_LOOM_PLUGINS/jboss/services/jboss
$ curl -X POST -H &quot;X-Loom-UserId:admin&quot;\
    -d @/tmp/jboss http://$LOOM_SERVER:$LOOM_PORT/v1/loom/services
</pre></div>
</div>
</div>
<div class="section" id="create-jboss-as-cluster-template-in-loom">
<h2>Create JBoss AS Cluster Template in Loom<a class="headerlink" href="#create-jboss-as-cluster-template-in-loom" title="Permalink to this headline">¶</a></h2>
<p>Once the &#8216;jboss&#8217; service has been added to Loom, you are ready to create a cluster template or even add this service to an existing cluster template.
The easiest way to get started running JBoss AS is to use the Webservices to add a new JBoss cluster template to Loom.</p>
<div class="sidebar">
<p class="first sidebar-title">Cluster template details</p>
<p class="last">Requires Java 7 and Ubuntu Image (jboss-installer has only been tested on Ubuntu).
After you have executed the following command, please make sure to update the provider for
&#8216;jboss-application-server&#8217; to appropriate one.</p>
</div>
<p>Use the following command to create the &#8216;jboss-application-server&#8217; cluster template:</p>
<div class="highlight-python"><div class="highlight"><pre>$ curl -o /tmp/jboss-application-server \
    $REMOTE_LOOM_PLUGINS/jboss/templates/jboss-application-server
$ curl -X POST -H &quot;X-Loom-UserId:admin&quot;\
    -d @/tmp/jboss-application-server http://$LOOM_SERVER:$LOOM_PORT/v1/loom/clustertemplates
</pre></div>
</div>
</div>
<div class="section" id="provision-an-instance-of-jboss-application-cluster-with-loom">
<h2>Provision an instance of &#8216;jboss-application-cluster&#8217; with Loom<a class="headerlink" href="#provision-an-instance-of-jboss-application-cluster-with-loom" title="Permalink to this headline">¶</a></h2>
<p>Once the cluster template has been created, you are now ready to create a cluster. Please
follow the cluster creation procedure from the main Loom documentation. You can either choose
a singlenode or multi-node JBoss AS cluster. Once the cluster has been successfully provisioned
you can verify the installations by visiting <a class="reference external" href="http:/">http:/</a>/&lt;host-id&gt;:8080 or can also check the default
helloworld application by visiting <a class="reference external" href="http:/">http:/</a>/&lt;host-id&gt;:8080/helloworld/hi.jsp.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/quickstart/index.html">Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/admin/index.html">Administration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/user/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rest/index.html">Web Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">FAQs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/release-notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/glossary.html">Glossary</a></li>
</ul>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li><a href="../index.html">Loom 0.9.5 Beta documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Continuuity Inc..
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.1.
    </div>
  </body>
</html>