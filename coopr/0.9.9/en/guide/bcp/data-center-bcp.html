<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-55081520-3']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <title>Datacenter High Availability &mdash; Coopr 0.9.9 Documentation</title>
    
    <link rel="stylesheet" href="../../_static/cdap.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    



    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.9.9',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="Coopr 0.9.9 Documentation" href="../../index.html" />
    <link rel="up" title="Business Continuity Plan (BCP)" href="index.html" />
    <link rel="next" title="Multi-Datacenter High Availability" href="multi-data-center-bcp.html" />
    <link rel="prev" title="Business Continuity Plan (BCP)" href="index.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">Index</a></li>
        <li class="right" >
          <a href="multi-data-center-bcp.html" title="Multi-Datacenter High Availability"
             accesskey="N">Next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Business Continuity Plan (BCP)"
             accesskey="P">Previous</a> |</li>
        
        <script type="text/javascript" src="../../_static/version-menu.js"></script>
        <script src="http://docs.cask.co/coopr/json-versions.js"/></script>
        <script>window.setVersion('0.9.9');</script>
       
        <li><a href="../../index.html">Coopr Documentation v0.9.9</a> &raquo;</li>
          <li><a href="../superadmin/index.html" >Super Admin Guide</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Business Continuity Plan (BCP)</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <span class="target" id="overview-single-data-center"></span><div class="section" id="datacenter-high-availability">
<span id="index-0"></span><h1>Datacenter High Availability<a class="headerlink" href="#datacenter-high-availability" title="Permalink to this headline">¶</a></h1>
<p>Coopr can be configured to be resilient to machine or component failures. This document describes the recommended configuration
for setting up Coopr for HA within a single datacenter. Please refer to <a class="reference internal" href="multi-data-center-bcp.html"><em>multi-datacenter HA</em></a> documentation
for configuring HA across multiple datacenters.</p>
<p>In order to support resiliency against machine or component failures within a datacenter, Coopr components can be configured to
run with redundancies on multiple machines. Each machine running Coopr can have a maximum of -</p>
<ul class="simple">
<li>One coopr-ui process</li>
<li>One coopr-server process</li>
<li>Multiple coopr-provisioner processes (See config COOPR_NUM_WORKERS in <a class="reference internal" href="../../installation/index.html"><em>installation guide</em></a>)</li>
<li>One ZooKeeper process</li>
<li>One database process</li>
</ul>
<p>The diagram below shows the logical deployment diagram of Coopr for HA in a datacenter-</p>
<div class="figure align-center" id="single-dc">
<img alt="Within Datacenter Architecture Diagram" src="../../_images/ha_within_colo.png" />
</div>
<div class="section" id="coopr-ui">
<h2>Coopr UI<a class="headerlink" href="#coopr-ui" title="Permalink to this headline">¶</a></h2>
<p>Coopr UI (coopr-ui) is stateless, and communicates with Coopr Server using REST endpoints. Hence Coopr UI can be easily run on multiple machines. User traffic is routed to multiple instances of Coopr UI using load balancers (such as HAproxy or Varnish or VIP).</p>
</div>
<div class="section" id="coopr-provisioner">
<h2>Coopr Provisioner<a class="headerlink" href="#coopr-provisioner" title="Permalink to this headline">¶</a></h2>
<p>Coopr Provisioner (coopr-provisioner) is also stateless, and communicates with Coopr Server using REST endpoints. Hence Coopr Provisioner can be easily run on multiple machines.</p>
</div>
<div class="section" id="coopr-server">
<h2>Coopr Server<a class="headerlink" href="#coopr-server" title="Permalink to this headline">¶</a></h2>
<p>Coopr Server (coopr-server) can be run on multiple machines too. When run in this mode, there will be a load balancer fronting the Coopr Servers. Coopr UI and Coopr Provisioners will be configured to communicate via a load balancer with the Coopr Server. Also, all Coopr Servers in a datacenter should connect to the same ZooKeeper quorum.</p>
</div>
<div class="section" id="zookeeper">
<h2>ZooKeeper<a class="headerlink" href="#zookeeper" title="Permalink to this headline">¶</a></h2>
<p>A ZooKeeper quorum of at least 3 machines is required for redundancy. Note that ZooKeeper needs to run with an odd number of total machines for redundancy.</p>
</div>
<div class="section" id="database">
<h2>Database<a class="headerlink" href="#database" title="Permalink to this headline">¶</a></h2>
<p>Database needs to be replicated with automatic failover in case the master database goes down. Database is also fronted by a proxy that directs all operations to master database, and Coopr Server connects to database using the proxy.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><!--
  Copyright © 2014-2015 Cask Data, Inc.

  Licensed under the Apache License, Version 2.0 (the "License"); you may not
  use this file except in compliance with the License. You may obtain a copy of
  the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
  WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
  License for the specific language governing permissions and limitations under
  the License.
-->


    
<div aria-label="globaltoc links">
<h3 class="pagenavtitle"><a href="../../index.html"> Table&nbsp;of&nbsp;Contents</a></h3>
<nav class="pagenav">
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/index.html">Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/index.html">Installation Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../superadmin/index.html">Super Admin Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../superadmin/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../superadmin/tenants.html">Tenant Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../superadmin/callbacks.html">Cluster Callbacks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../superadmin/plugins.html">Provisioner Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../superadmin/monitoring.html">Monitoring and Metrics</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Business Continuity Plan (BCP)</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="">Datacenter High Availability</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#coopr-ui">Coopr UI</a></li>
<li class="toctree-l4"><a class="reference internal" href="#coopr-provisioner">Coopr Provisioner</a></li>
<li class="toctree-l4"><a class="reference internal" href="#coopr-server">Coopr Server</a></li>
<li class="toctree-l4"><a class="reference internal" href="#zookeeper">ZooKeeper</a></li>
<li class="toctree-l4"><a class="reference internal" href="#database">Database</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="multi-data-center-bcp.html">Multi-Datacenter High Availability</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../admin/index.html">Administration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rest/index.html">Web Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../implementation.html">Under the Hood</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/index.html">FAQs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release-notes/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../javadocs/index.html">Javadocs</a></li>
</ul>

</nav>
</div>
  <h4>Previous Topic</h4>
  <p class="topless"><a href="index.html"
                        title="Previous Chapter">Business Continuity Plan (BCP)</a></p>
  <h4>Next Topic</h4>
  <p class="topless"><a href="multi-data-center-bcp.html"
                        title="Next Chapter">Multi-Datacenter High Availability</a></p>
  <div role="note" aria-label="downloads links">
    <h3>Downloads</h3>
    <ul class="this-page-menu">
      <li><a href="http://docs.cask.co/coopr/0.9.9/coopr-docs-0.9.9-web.zip"
            rel="nofollow">Zip Archive of Coopr Documentation</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick Search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">

<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;margin:0px auto;}
.tg td{padding:0px 20px 0px 20px;border-width:0px;overflow:hidden;word-break:normal;font-weight:normal;}
.tg th{padding:0px 20px 0px 20px;border-width:0px;overflow:hidden;word-break:normal;font-weight:normal;}
.tg .tg-s6z2{text-align:center;}
.tg .tg-0ord{text-align:right;}
.tg a{font-weight:bold;}
</style>
<table class="tg" width= 100%>
  <tr>
    <th class="tg-031e">Previous Topic: 
    <a title="Business Continuity Plan (BCP)" href="index.html" />Business Continuity Plan (BCP)</a>&nbsp;&nbsp;
    
    </th>
    <th class="tg-s6z2">
        Copyright &copy; 2014-2015 Cask Data, Inc.
    
    </th>
    <th class="tg-0ord">&nbsp;&nbsp;Next Topic:
    <a title="Multi-Datacenter High Availability" href="multi-data-center-bcp.html" />Multi-Datacenter High Availability</a>
    
    </th>
  </tr>
</table>

    </div>
  </body>
</html>