<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-55081520-3']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <title>REST API: Services &mdash; Coopr 0.9.9 Documentation</title>
    
    <link rel="stylesheet" href="../_static/cdap.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    



    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.9.9',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="Coopr 0.9.9 Documentation" href="../index.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">Index</a></li>
        
        <script type="text/javascript" src="../_static/version-menu.js"></script>
        <script src="http://docs.cask.co/coopr/json-versions.js"/></script>
        <script>window.setVersion('0.9.9');</script>
       
        <li><a href="../index.html">Coopr Documentation v0.9.9</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="rest-api-services">
<span id="index-0"></span><h1>REST API: Services<a class="headerlink" href="#rest-api-services" title="Permalink to this headline">¶</a></h1>
<p><a class="reference internal" href="index.html"><em>REST Overview</em></a> |
<a class="reference internal" href="tenants.html"><em>Tenants</em></a> |
<a class="reference internal" href="provisioners.html"><em>Provisioners</em></a> |
<a class="reference internal" href="provider.html"><em>Providers</em></a> |
<a class="reference internal" href="hardware.html"><em>Hardware Types</em></a> |
<a class="reference internal" href="image.html"><em>Image Types</em></a> |
<a class="reference internal" href=""><em>Services</em></a> |
<a class="reference internal" href="templates.html"><em>Cluster Template</em></a> |
<a class="reference internal" href="entities.html"><em>Importing &amp; Exporting</em></a> |
<a class="reference internal" href="clusters.html"><em>Clusters</em></a> |
<a class="reference internal" href="plugins.html"><em>Plugins</em></a> |
<a class="reference internal" href="metrics.html"><em>Metrics</em></a></p>
<p>The REST APIs allow the administrator to add services. A service is some piece of software
that can be placed on a cluster. Examples include a mysql server, a Hadoop namenode, a
Lucene indexer, and much more. The administrator defines the service entirely, so any software
supported by the underlying provisioners can be added. By writing a provisioner
automator plugin, or by using the included chef-solo and shell plugins, an administrator can manage
any service they want.</p>
<p>A service is uniquely identified by its name. It also contains a short description and a section for
provisioner information and a section for its dependencies. The provisioner and dependencies sections
are described in more detail below.</p>
<div class="section" id="provisioner">
<h2>Provisioner<a class="headerlink" href="#provisioner" title="Permalink to this headline">¶</a></h2>
<p>The provisioner section contains any information the provisioner may need to
carry out actions related to the service. Service actions include INSTALL,
CONFIGURE, INITIALIZE, START, STOP, and REMOVE. The administrator needs to
add any relevant actions for a service. For example, it is possible to have a
service that only installs and configures, but does none of the other actions.
For that service, the administrator would need to add 2 actions for the service,
and choose which automator type will be used to carry out that action. Depending
on the automator type, different fields may need to be provided. Required fields
are defined by the automator type, which is given by the plugin itself.</p>
<p>The provisioner section itself is a JSON object with <tt class="docutils literal"><span class="pre">actions</span></tt> as a key, and a
JSON object as its value.  The value contains a mapping of service action
(one of install, configure, initialize, start, stop, and remove) to
automator details. The automator details is a JSON object containing a <tt class="docutils literal"><span class="pre">type</span></tt>,
which defines which automator type to use for that action, and <tt class="docutils literal"><span class="pre">fields</span></tt>. Fields
contains another JSON object which is a set of key-value pairs required by the
automator plugin.</p>
<p>This example is taken from an example Hadoop namenode service. It uses chef-solo as the
automator type, which requires a run_list field and also allows an optional json_attributes field.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="s2">&quot;provisioner&quot;</span>: <span class="o">{</span>
  <span class="s2">&quot;actions&quot;</span>: <span class="o">{</span>
      <span class="s2">&quot;configure&quot;</span>: <span class="o">{</span>
          <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;chef-solo&quot;</span>,
          <span class="s2">&quot;fields&quot;</span>: <span class="o">{</span>
              <span class="s2">&quot;run_list&quot;</span>: <span class="s2">&quot;recipe[hadoop_wrapper::default],recipe[hadoop::default]&quot;</span>
          <span class="o">}</span>
      <span class="o">}</span>,
      <span class="s2">&quot;initialize&quot;</span>: <span class="o">{</span>
          <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;chef-solo&quot;</span>,
          <span class="s2">&quot;fields&quot;</span>: <span class="o">{</span>
              <span class="s2">&quot;run_list&quot;</span>: <span class="s2">&quot;recipe[hadoop_wrapper::hadoop_hdfs_namenode_init]&quot;</span>
          <span class="o">}</span>
      <span class="o">}</span>,
      <span class="s2">&quot;install&quot;</span>: <span class="o">{</span>
          <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;chef-solo&quot;</span>,
          <span class="s2">&quot;fields&quot;</span>: <span class="o">{</span>
              <span class="s2">&quot;run_list&quot;</span>: <span class="s2">&quot;recipe[hadoop::hadoop_hdfs_namenode]&quot;</span>
          <span class="o">}</span>
      <span class="o">}</span>,
      <span class="s2">&quot;start&quot;</span>: <span class="o">{</span>
          <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;chef-solo&quot;</span>,
          <span class="s2">&quot;fields&quot;</span>: <span class="o">{</span>
              <span class="s2">&quot;json_attributes&quot;</span>: <span class="s2">&quot;{\&quot;coopr\&quot;: { \&quot;node\&quot;: { \&quot;services\&quot;: { \&quot;hadoop-hdfs-namenode\&quot;: \&quot;start\&quot; } } } }&quot;</span>,
              <span class="s2">&quot;run_list&quot;</span>: <span class="s2">&quot;recipe[hadoop_wrapper::default],recipe[hadoop::hadoop_hdfs_namenode],recipe[coopr_service_runner::default]&quot;</span>
          <span class="o">}</span>
      <span class="o">}</span>,
      <span class="s2">&quot;stop&quot;</span>: <span class="o">{</span>
          <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;chef-solo&quot;</span>,
          <span class="s2">&quot;fields&quot;</span>: <span class="o">{</span>
              <span class="s2">&quot;json_attributes&quot;</span>: <span class="s2">&quot;{\&quot;coopr\&quot;: { \&quot;node\&quot;: { \&quot;services\&quot;: { \&quot;hadoop-hdfs-namenode\&quot;: \&quot;stop\&quot; } } } }&quot;</span>,
              <span class="s2">&quot;run_list&quot;</span>: <span class="s2">&quot;recipe[hadoop_wrapper::default],recipe[hadoop::hadoop_hdfs_namenode],recipe[coopr_service_runner::default]&quot;</span>
          <span class="o">}</span>
      <span class="o">}</span>
  <span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="dependencies">
<h2>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h2>
<p>Dependencies serve two general purposes. The first is to enforce that a service
cannot be placed onto a cluster without also placing the services it requires. The second is to enforce a safe
ordering of service actions while performing cluster operations. It is easiest to understand the different
types of dependencies by going through example. In this example we have a service called &#8220;myapp-2.0&#8221;.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="s2">&quot;dependencies&quot;</span>: <span class="o">{</span>
    <span class="s2">&quot;provides&quot;</span>: <span class="o">[</span> <span class="s2">&quot;myapp&quot;</span> <span class="o">]</span>,
    <span class="s2">&quot;conflicts&quot;</span>: <span class="o">[</span> <span class="s2">&quot;myapp-1.0&quot;</span>, <span class="s2">&quot;myapp-1.5&quot;</span> <span class="o">]</span>,
    <span class="s2">&quot;install&quot;</span>: <span class="o">{</span>
        <span class="s2">&quot;requires&quot;</span>: <span class="o">[</span> <span class="s2">&quot;base&quot;</span> <span class="o">]</span>,
        <span class="s2">&quot;uses&quot;</span>: <span class="o">[</span> <span class="s2">&quot;ntp&quot;</span> <span class="o">]</span>
    <span class="o">}</span>,
    <span class="s2">&quot;runtime&quot;</span>: <span class="o">{</span>
        <span class="s2">&quot;requires&quot;</span>: <span class="o">[</span> <span class="s2">&quot;sql-db&quot;</span> <span class="o">]</span>,
        <span class="s2">&quot;uses&quot;</span>: <span class="o">[</span> <span class="s2">&quot;load-balancer&quot;</span> <span class="o">]</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="conflicts">
<h2>Conflicts<a class="headerlink" href="#conflicts" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="docutils literal"><span class="pre">conflicts</span></tt> key specifies an array of services that cannot be placed on a cluster with the given service.
In this example, that means that &#8220;myapp-2.0&#8221; cannot be placed on a cluster with &#8220;myapp-1.0&#8221; or &#8220;myapp-1.5&#8221;.</p>
</div>
<div class="section" id="install">
<h2>Install<a class="headerlink" href="#install" title="Permalink to this headline">¶</a></h2>
<p>Install defines install time dependencies. Install time dependencies take effect for the INSTALL and REMOVE
service actions. It contains a <tt class="docutils literal"><span class="pre">requires</span></tt> key which specifies an array of services that the given services
requires for its installation. In this example, &#8220;myapp-2.0&#8221; <em>requires</em> the &#8220;base&#8221; service at install time. This
means that the installation of the &#8220;base&#8221; service will occur before the install of the &#8220;myapp-2.0&#8221; service. Similarly,
the removal of the &#8220;myapp-2.0&#8221; service will occur before the removal of the &#8220;base&#8221; service. This also means that
the &#8220;myapp-2.0&#8221; service cannot be placed on a cluster without the &#8220;base&#8221; service also being placed on the cluster.
The <tt class="docutils literal"><span class="pre">uses</span></tt> key is like the <tt class="docutils literal"><span class="pre">requires</span></tt> key in that it enforces the same ordering of service actions. However,
<tt class="docutils literal"><span class="pre">uses</span></tt> will not enforce the presence of the dependent service. In this example, &#8220;myapp-2.0&#8221; <em>uses</em> the &#8220;ntp&#8221; service
at install time. This means that if the &#8220;ntp&#8221; service is also on the cluster, the installation of &#8220;ntp&#8221; will occur
before the installation of &#8220;myapp-2.0&#8221;. However, &#8220;ntp&#8221; does not have to be placed on the cluster in order for &#8220;myapp-2.0&#8221;
to be placed on the cluster.</p>
</div>
<div class="section" id="runtime">
<h2>Runtime<a class="headerlink" href="#runtime" title="Permalink to this headline">¶</a></h2>
<p>Runtime defines run time dependencies. It also contains <tt class="docutils literal"><span class="pre">requires</span></tt> and <tt class="docutils literal"><span class="pre">uses</span></tt> keys that are analagous to those
in the install section. The only difference is the service actions that they apply to. Install dependencies affect
the INSTALL and REMOVE service actions, whereas runtime dependencies affect the INITIALIZE, START, and STOP service actions.
In this example, &#8220;myapp-2.0&#8221; <em>requires</em> the &#8220;sql-db&#8221; service. This means that &#8220;myapp-2.0&#8221; cannot be placed on a cluster
without a &#8220;sql-db&#8221; service. It also means that the initialization of &#8220;myapp-2.0&#8221; will occur after the start of &#8220;sql-db&#8221;.
It also means the start of &#8220;myapp-2.0&#8221; will occur after the start of &#8220;sql-db&#8221; and that the stop of &#8220;myapp-2.0&#8221;
will occur before the stop of &#8220;sql-db&#8221;. Similarly, because &#8220;myapp-2.0&#8221; <em>uses</em> &#8220;load-balancer&#8221;, initialization and start of
&#8220;myapp-2.0&#8221; will occur after the start of &#8220;load-balancer&#8221;. Similarly, the stop of &#8220;myapp-2.0&#8221; will occur before the stop
of &#8220;load-balancer&#8221;. Since it is in <tt class="docutils literal"><span class="pre">uses</span></tt>, enforcement of this ordering only applies if &#8220;load-balancer&#8221; is present on the
same cluster as &#8220;myapp-2.0&#8221;. The &#8220;myapp-2.0&#8221; service can be placed on a cluster without the &#8220;load-balancer&#8221; service.</p>
</div>
<div class="section" id="provides">
<h2>Provides<a class="headerlink" href="#provides" title="Permalink to this headline">¶</a></h2>
<p>The provides section provides an extra level of indirection when specifying dependencies. In this example, the &#8220;myapp-2.0&#8221;
service provides the &#8220;myapp&#8221; service. This means that other services can put &#8220;myapp&#8221; in their runtime or install dependencies,
and &#8220;myapp-2.0&#8221; will satisfy that dependency. As another example, &#8220;myapp-2.0&#8221; <em>requires</em> the &#8220;sql-db&#8221; service. If there was a
service called &#8220;mysql-db&#8221; that provides &#8220;sql-db&#8221;, then it would be fine for &#8220;mysql-db&#8221; and &#8220;myapp-2.0&#8221; to be on the same
cluster. All the ordering enforced by that runtime <em>requires</em> dependency would be enforced between the &#8220;myapp-2.0&#8221; and &#8220;mysql-db&#8221;
services.</p>
<div class="section" id="add-a-service">
<span id="service-create"></span><h3>Add a Service<a class="headerlink" href="#add-a-service" title="Permalink to this headline">¶</a></h3>
<p>To create a new services, make a HTTP POST request to URI:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="o">/</span><span class="n">services</span>
</pre></div>
</div>
<p>The POST body must contain a unique <tt class="docutils literal"><span class="pre">name</span></tt>, and a <tt class="docutils literal"><span class="pre">provisioner</span></tt> section
describing how provisioner automators should carry out service actions.
Optionally, a <tt class="docutils literal"><span class="pre">description</span></tt> can be given describing the service, and a
<tt class="docutils literal"><span class="pre">dependencies</span></tt> section can be given, describing other services that the
service depends on.</p>
</div>
</div>
<div class="section" id="post-parameters">
<h2>POST Parameters<a class="headerlink" href="#post-parameters" title="Permalink to this headline">¶</a></h2>
<p>Parameters</p>
<table border="1" class="docutils">
<colgroup>
<col width="60%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>name</td>
<td>Specifies the name for the services. The assigned name must have only
alphanumeric, dash(-), dot(.), and underscore(_) characters.</td>
</tr>
<tr class="row-odd"><td>description</td>
<td>Provides a description for the service.</td>
</tr>
<tr class="row-even"><td>dependencies</td>
<td>Dependencies of the service. Includes information about what the service
requires and uses at install time and at runtime, as well as what services
it conflicts with.</td>
</tr>
<tr class="row-odd"><td>provisioner</td>
<td>Provisioner related information, including how provisioner automators should
perform service actions like install, configure, initialize, start, stop,
and remove.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="http-responses">
<h2>HTTP Responses<a class="headerlink" href="#http-responses" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="60%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Status Code</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>200 (OK)</td>
<td>Successfully created</td>
</tr>
<tr class="row-odd"><td>400 (BAD_REQUEST)</td>
<td>Bad request, server is unable to process the request, or a services&#8217; name already exists
in the system.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>curl -X POST
       -H <span class="s1">&#39;Coopr-UserID:admin&#39;</span>
       -H <span class="s1">&#39;Coopr-TenantID:&lt;tenantid&gt;&#39;</span>
       -H <span class="s1">&#39;Coopr-ApiKey:&lt;apikey&gt;&#39;</span>
       -d <span class="s1">&#39;{</span>
<span class="s1">               &quot;name&quot;: &quot;hadoop-hdfs-datanode&quot;,</span>
<span class="s1">               &quot;description&quot;: &quot;Hadoop HDFS DataNode&quot;,</span>
<span class="s1">               &quot;dependencies&quot;: {</span>
<span class="s1">                   &quot;conflicts&quot;: [],</span>
<span class="s1">                   &quot;provides&quot;: [],</span>
<span class="s1">                   &quot;install&quot;: {</span>
<span class="s1">                       &quot;requires&quot;: [],</span>
<span class="s1">                       &quot;uses&quot;: []</span>
<span class="s1">                   },</span>
<span class="s1">                   &quot;runtime&quot;: {</span>
<span class="s1">                       &quot;requires&quot;: [ &quot;hadoop-hdfs-namenode&quot; ],</span>
<span class="s1">                       &quot;uses&quot;: []</span>
<span class="s1">                   }</span>
<span class="s1">               },</span>
<span class="s1">               &quot;provisioner&quot;: {</span>
<span class="s1">                   &quot;actions&quot;: {</span>
<span class="s1">                       &quot;configure&quot;: {</span>
<span class="s1">                           &quot;type&quot;: &quot;chef-solo&quot;,</span>
<span class="s1">                           &quot;fields&quot;: {</span>
<span class="s1">                               &quot;run_list&quot;: &quot;recipe[hadoop_wrapper::default],recipe[hadoop::default]&quot;</span>
<span class="s1">                           }</span>
<span class="s1">                       },</span>
<span class="s1">                       &quot;initialize&quot;: {</span>
<span class="s1">                           &quot;type&quot;: &quot;chef-solo&quot;,</span>
<span class="s1">                           &quot;fields&quot;: {</span>
<span class="s1">                               &quot;run_list&quot;: &quot;recipe[hadoop_wrapper::hadoop_hdfs_namenode_init]&quot;</span>
<span class="s1">                           },</span>
<span class="s1">                       },</span>
<span class="s1">                       ...</span>
<span class="s1">                   }</span>
<span class="s1">               }</span>
<span class="s1">           }&#39;</span>
       http://&lt;server&gt;:&lt;port&gt;/&lt;version&gt;/services
</pre></div>
</div>
<div class="section" id="retrieve-a-service">
<span id="service-retrieve"></span><h3>Retrieve a Service<a class="headerlink" href="#retrieve-a-service" title="Permalink to this headline">¶</a></h3>
<p>To retrieve details about a services, make a GET HTTP request to URI:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="o">/</span><span class="n">services</span><span class="o">/{</span><span class="n">name</span><span class="o">}</span>
</pre></div>
</div>
<p>This resource request represents an individual services for viewing.</p>
</div>
</div>
<div class="section" id="id1">
<h2>HTTP Responses<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="60%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Status Code</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>200 (OK)</td>
<td>Successful</td>
</tr>
<tr class="row-odd"><td>404 (NOT FOUND)</td>
<td>If the resource requested is not configured and available in system.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id2">
<h2>Example<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>curl -H <span class="s1">&#39;Coopr-UserID:admin&#39;</span>
       -H <span class="s1">&#39;Coopr-TenantID:&lt;tenantid&gt;&#39;</span>
       -H <span class="s1">&#39;Coopr-ApiKey:&lt;apikey&gt;&#39;</span>
       http://&lt;server&gt;:&lt;port&gt;/&lt;version&gt;/services/small.example
<span class="nv">$ </span><span class="o">{</span>
      <span class="s2">&quot;name&quot;</span>: <span class="s2">&quot;hadoop-hdfs-datanode&quot;</span>,
      <span class="s2">&quot;description&quot;</span>: <span class="s2">&quot;Hadoop HDFS DataNode&quot;</span>,
      <span class="s2">&quot;dependencies&quot;</span>: <span class="o">{</span>
          <span class="s2">&quot;conflicts&quot;</span>: <span class="o">[]</span>,
          <span class="s2">&quot;provides&quot;</span>: <span class="o">[]</span>,
          <span class="s2">&quot;install&quot;</span>: <span class="o">{</span>
              <span class="s2">&quot;requires&quot;</span>: <span class="o">[]</span>,
              <span class="s2">&quot;uses&quot;</span>: <span class="o">[]</span>
          <span class="o">}</span>,
          <span class="s2">&quot;runtime&quot;</span>: <span class="o">{</span>
              <span class="s2">&quot;requires&quot;</span>: <span class="o">[</span> <span class="s2">&quot;hadoop-hdfs-namenode&quot;</span> <span class="o">]</span>,
              <span class="s2">&quot;uses&quot;</span>: <span class="o">[]</span>
          <span class="o">}</span>
      <span class="o">}</span>,
      <span class="s2">&quot;provisioner&quot;</span>: <span class="o">{</span>
          <span class="s2">&quot;actions&quot;</span>: <span class="o">{</span>
              <span class="s2">&quot;configure&quot;</span>: <span class="o">{</span>
                  <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;chef-solo&quot;</span>,
                  <span class="s2">&quot;fields&quot;</span>: <span class="o">{</span>
                      <span class="s2">&quot;run_list&quot;</span>: <span class="s2">&quot;recipe[hadoop_wrapper::default],recipe[hadoop::default]&quot;</span>
                  <span class="o">}</span>
              <span class="o">}</span>,
              <span class="s2">&quot;initialize&quot;</span>: <span class="o">{</span>
                  <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;chef-solo&quot;</span>,
                  <span class="s2">&quot;fields&quot;</span>: <span class="o">{</span>
                      <span class="s2">&quot;run_list&quot;</span>: <span class="s2">&quot;recipe[hadoop_wrapper::hadoop_hdfs_namenode_init]&quot;</span>
                  <span class="o">}</span>,
              <span class="o">}</span>,
              ...
          <span class="o">}</span>
      <span class="o">}</span>
  <span class="o">}</span>
</pre></div>
</div>
<div class="section" id="delete-a-service">
<span id="service-delete"></span><h3>Delete a Service<a class="headerlink" href="#delete-a-service" title="Permalink to this headline">¶</a></h3>
<p>To delete services, make a DELETE HTTP request to URI:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="o">/</span><span class="n">services</span><span class="o">/{</span><span class="n">name</span><span class="o">}</span>
</pre></div>
</div>
<p>This resource request represents an individual services for deletion.</p>
</div>
</div>
<div class="section" id="id3">
<h2>HTTP Responses<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="60%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Status Code</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>200 (OK)</td>
<td>If delete was successful</td>
</tr>
<tr class="row-odd"><td>404 (NOT FOUND)</td>
<td>If the resource requested is not found.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id4">
<h2>Example<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>curl -X DELETE
       -H <span class="s1">&#39;Coopr-UserID:admin&#39;</span>
       -H <span class="s1">&#39;Coopr-TenantID:&lt;tenantid&gt;&#39;</span>
       -H <span class="s1">&#39;Coopr-ApiKey:&lt;apikey&gt;&#39;</span>
       http://&lt;server&gt;:&lt;port&gt;/&lt;version&gt;/services/example
</pre></div>
</div>
<div class="section" id="update-a-service">
<span id="service-modify"></span><h3>Update a Service<a class="headerlink" href="#update-a-service" title="Permalink to this headline">¶</a></h3>
<p>To update a service, make a PUT HTTP request to URI:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="o">/</span><span class="n">services</span><span class="o">/{</span><span class="n">name</span><span class="o">}</span>
</pre></div>
</div>
<p>Resource specified above respresents an individual services request for an update operation.
Currently, the update of services resource requires complete services object to be
in the request body.</p>
</div>
</div>
<div class="section" id="put-parameters">
<h2>PUT Parameters<a class="headerlink" href="#put-parameters" title="Permalink to this headline">¶</a></h2>
<p>Required Parameters</p>
<table border="1" class="docutils">
<colgroup>
<col width="60%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>name</td>
<td>Specifies the name of the service to be updated.</td>
</tr>
<tr class="row-odd"><td>description</td>
<td>New description or old one for the service.</td>
</tr>
<tr class="row-even"><td>providermap</td>
<td>Provider map is map of providers and equivalent flavor type for current services being configured.
It&#8217;s currently a map of map.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id5">
<h2>HTTP Responses<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="60%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Status Code</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>200 (OK)</td>
<td>If update was successful</td>
</tr>
<tr class="row-odd"><td>400 (BAD REQUEST)</td>
<td>If the resource requested is not found or the fields of the PUT body do not specify all the required fields.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id6">
<h2>Example<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>curl -X PUT
       -H <span class="s1">&#39;Coopr-UserID:admin&#39;</span>
       -H <span class="s1">&#39;Coopr-TenantID:&lt;tenantid&gt;&#39;</span>
       -H <span class="s1">&#39;Coopr-ApiKey:&lt;apikey&gt;&#39;</span>
       -d <span class="s1">&#39;{</span>
<span class="s1">                &quot;name&quot;: &quot;myapp&quot;,</span>
<span class="s1">                &quot;description&quot;: &quot;my application&quot;,</span>
<span class="s1">                &quot;dependson&quot;: [ &quot;base&quot; ],</span>
<span class="s1">                &quot;provisioner&quot;: {</span>
<span class="s1">                    &quot;actions&quot;: {</span>
<span class="s1">                        &quot;configure&quot;: {</span>
<span class="s1">                            &quot;type&quot;: &quot;chef-solo&quot;,</span>
<span class="s1">                            &quot;fields&quot;: {</span>
<span class="s1">                                &quot;run_list&quot;: &quot;recipe[apt::default]&quot;</span>
<span class="s1">                            }</span>
<span class="s1">                        },</span>
<span class="s1">                        &quot;install&quot;: {</span>
<span class="s1">                            &quot;type&quot;: &quot;chef-solo&quot;,</span>
<span class="s1">                            &quot;fields&quot;: {</span>
<span class="s1">                                &quot;run_list&quot;: &quot;recipe[apt::default]&quot;</span>
<span class="s1">                            }</span>
<span class="s1">                        }</span>
<span class="s1">                    }</span>
<span class="s1">                }</span>
<span class="s1">          }&#39;</span>
       http://&lt;server&gt;:&lt;port&gt;/&lt;version&gt;/services/myapp
</pre></div>
</div>
<div class="section" id="list-all-services">
<span id="service-all-list"></span><h3>List all Services<a class="headerlink" href="#list-all-services" title="Permalink to this headline">¶</a></h3>
<p>To list all the services, make a GET HTTP request to URI:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="o">/</span><span class="n">services</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id7">
<h2>HTTP Responses<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="60%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Status Code</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>200 (OK)</td>
<td>Successful</td>
</tr>
<tr class="row-odd"><td>400 (BAD REQUEST)</td>
<td>If the resource uri is specified incorrectly.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id8">
<h2>Example<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>curl -H <span class="s1">&#39;Coopr-UserID:admin&#39;</span>
       -H <span class="s1">&#39;Coopr-TenantID:&lt;tenantid&gt;&#39;</span>
       -H <span class="s1">&#39;Coopr-ApiKey:&lt;apikey&gt;&#39;</span>
       http://&lt;server&gt;:&lt;port&gt;/&lt;version&gt;/services
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><!--
  Copyright © 2014-2015 Cask Data, Inc.

  Licensed under the Apache License, Version 2.0 (the "License"); you may not
  use this file except in compliance with the License. You may obtain a copy of
  the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
  WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
  License for the specific language governing permissions and limitations under
  the License.
-->


    
<div aria-label="globaltoc links">
<h3 class="pagenavtitle"><a href="../index.html"> Table&nbsp;of&nbsp;Contents</a></h3>
<nav class="pagenav">
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/quickstart/index.html">Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/superadmin/index.html">Super Admin Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/admin/index.html">Administration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/user/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html">Web Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../implementation.html">Under the Hood</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">FAQs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../javadocs/index.html">Javadocs</a></li>
</ul>

</nav>
</div>
  <div role="note" aria-label="downloads links">
    <h3>Downloads</h3>
    <ul class="this-page-menu">
      <li><a href="http://docs.cask.co/coopr/0.9.9/coopr-docs-0.9.9-web.zip"
            rel="nofollow">Zip Archive of Coopr Documentation</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick Search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">

<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;margin:0px auto;}
.tg td{padding:0px 20px 0px 20px;border-width:0px;overflow:hidden;word-break:normal;font-weight:normal;}
.tg th{padding:0px 20px 0px 20px;border-width:0px;overflow:hidden;word-break:normal;font-weight:normal;}
.tg .tg-s6z2{text-align:center;}
.tg .tg-0ord{text-align:right;}
.tg a{font-weight:bold;}
</style>
<table class="tg" width= 100%>
  <tr>
    <th class="tg-031e">
    
    </th>
    <th class="tg-s6z2">
        Copyright &copy; 2014-2015 Cask Data, Inc.
    
    </th>
    <th class="tg-0ord">
    
    </th>
  </tr>
</table>

    </div>
  </body>
</html>