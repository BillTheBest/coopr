<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-55081520-3']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <title>REST API: Tenants &mdash; Coopr 0.9.9 Documentation</title>
    
    <link rel="stylesheet" href="../_static/cdap.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    



    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.9.9',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="Coopr 0.9.9 Documentation" href="../index.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">Index</a></li>
        
        <script type="text/javascript" src="../_static/version-menu.js"></script>
        <script src="http://docs.cask.co/coopr/json-versions.js"/></script>
        <script>window.setVersion('0.9.9');</script>
       
        <li><a href="../index.html">Coopr Documentation v0.9.9</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="rest-api-tenants">
<span id="index-0"></span><h1>REST API: Tenants<a class="headerlink" href="#rest-api-tenants" title="Permalink to this headline">¶</a></h1>
<p><a class="reference internal" href="index.html"><em>REST Overview</em></a> |
<a class="reference internal" href=""><em>Tenants</em></a> |
<a class="reference internal" href="provisioners.html"><em>Provisioners</em></a> |
<a class="reference internal" href="provider.html"><em>Providers</em></a> |
<a class="reference internal" href="hardware.html"><em>Hardware Types</em></a> |
<a class="reference internal" href="image.html"><em>Image Types</em></a> |
<a class="reference internal" href="services.html"><em>Services</em></a> |
<a class="reference internal" href="templates.html"><em>Cluster Template</em></a> |
<a class="reference internal" href="entities.html"><em>Importing &amp; Exporting</em></a> |
<a class="reference internal" href="clusters.html"><em>Clusters</em></a> |
<a class="reference internal" href="plugins.html"><em>Plugins</em></a> |
<a class="reference internal" href="metrics.html"><em>Metrics</em></a></p>
<p>Using the Superadmin REST API, you can create, modify, retrieve, and delete tenants.
Each tenant consists of a unique id, a name, some number of workers, and optional additional
settings, such as max clusters allowed in the tenant or max nodes allowed in the tenant.
Only the superadmin is allowed to access the tenant APIs.</p>
<div class="section" id="create-a-tenant">
<span id="tenants-create"></span><h2>Create a Tenant<a class="headerlink" href="#create-a-tenant" title="Permalink to this headline">¶</a></h2>
<p>To create a new tenant, make a HTTP POST request to URI:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="o">/</span><span class="n">tenants</span>
</pre></div>
</div>
<p>The POST body is a JSON Object that must contain a <code class="docutils literal"><span class="pre">tenant</span></code>, whose value is another JSON Object
describing the tenant to create. It must contain <code class="docutils literal"><span class="pre">name</span></code> and <code class="docutils literal"><span class="pre">workers</span></code> as keys specifying
the name of the tenant and the number of workers assigned to the tenant. Other key-value pairs
can be added to specify other tenant specific settings, such as quotas on the maximum number
of clusters and nodes allowed within the tenant.</p>
<p>The POST body can optionally contain a <code class="docutils literal"><span class="pre">bootstrap</span></code> key whose value is a boolean indicating
whether or not to bootstrap the new tenant. Bootstrapping a tenant copies all providers,
hardware types, image types, services, cluster templates, and plugin resources from the superadmin
tenant into the new created tenant.</p>
<div class="section" id="post-parameters">
<h3>POST Parameters<a class="headerlink" href="#post-parameters" title="Permalink to this headline">¶</a></h3>
<p>Required Parameters</p>
<table border="1" class="docutils">
<colgroup>
<col width="60%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>bootstrap</td>
<td>whether or not to bootstrap the tenant by copying superadmin data. Defaults to false.</td>
</tr>
<tr class="row-odd"><td>tenant</td>
<td>JSON Object describing the tenant. Fields are documented below.</td>
</tr>
<tr class="row-even"><td>name</td>
<td>Specifies the name for the tenant; the assigned name must have only
alphanumeric, dash(-), dot(.), or underscore(_) characters</td>
</tr>
<tr class="row-odd"><td>description</td>
<td>Optional description of the tenant</td>
</tr>
<tr class="row-even"><td>workers</td>
<td>Number of workers assigned to the tenant</td>
</tr>
<tr class="row-odd"><td>maxClusters</td>
<td>Max number of clusters allowed for the tenant</td>
</tr>
<tr class="row-even"><td>maxNodes</td>
<td>Max nodes allowed for the tenant</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="http-responses">
<h3>HTTP Responses<a class="headerlink" href="#http-responses" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="60%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Status Code</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>200 (OK)</td>
<td>Successfully created</td>
</tr>
<tr class="row-odd"><td>400 (BAD_REQUEST)</td>
<td>Bad request, server is unable to process the request because it is ill-formed.</td>
</tr>
<tr class="row-even"><td>409 (CONFLICT)</td>
<td>A tenant with the requested name already exists.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>curl -X POST
       -H <span class="s1">&#39;Coopr-UserID:admin&#39;</span>
       -H <span class="s1">&#39;Coopr-TenantID:superadmin&#39;</span>
       -H <span class="s1">&#39;Coopr-ApiKey:&lt;apikey&gt;&#39;</span>
       -d <span class="s1">&#39;{</span>
<span class="s1">               &quot;tenant&quot;: {</span>
<span class="s1">                   &quot;name&quot;:&quot;my-company&quot;,</span>
<span class="s1">                   &quot;workers&quot;:10</span>
<span class="s1">               },</span>
<span class="s1">               &quot;bootstrap&quot;: false</span>
<span class="s1">           }&#39;</span>
       http://&lt;server&gt;:&lt;port&gt;/&lt;version&gt;/tenants
</pre></div>
</div>
</div>
</div>
<div class="section" id="retrieve-a-tenant">
<span id="tenants-retrieve"></span><h2>Retrieve a Tenant<a class="headerlink" href="#retrieve-a-tenant" title="Permalink to this headline">¶</a></h2>
<p>To retrieve details about a tenant, make a GET HTTP request to URI:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="o">/</span><span class="n">tenants</span><span class="o">/{</span><span class="n">id</span><span class="o">}</span>
</pre></div>
</div>
<p>This resource request represents an individual tenant for viewing.</p>
<div class="section" id="id1">
<h3>HTTP Responses<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>The response is a JSON Object representing the tenant. It contains
<code class="docutils literal"><span class="pre">name</span></code>, <code class="docutils literal"><span class="pre">workers</span></code>, <code class="docutils literal"><span class="pre">maxClusters</span></code>, and <code class="docutils literal"><span class="pre">maxNodes</span></code>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="60%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Status Code</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>200 (OK)</td>
<td>Successful</td>
</tr>
<tr class="row-odd"><td>404 (NOT FOUND)</td>
<td>If the resource requested is not configured or available in system.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id2">
<h3>Example<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>curl -X GET
       -H <span class="s1">&#39;Coopr-UserID:admin&#39;</span>
       -H <span class="s1">&#39;Coopr-TenantID:superadmin&#39;</span>
       -H <span class="s1">&#39;Coopr-ApiKey:&lt;apikey&gt;&#39;</span>
       http://&lt;server&gt;:&lt;port&gt;/&lt;version&gt;/tenants/my-company
<span class="nv">$ </span><span class="o">{</span> <span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;my-company&quot;</span>, <span class="s2">&quot;workers&quot;</span>:10, <span class="s2">&quot;maxClusters&quot;</span>:20, <span class="s2">&quot;maxNodes&quot;</span>:100 <span class="o">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="delete-a-tenant">
<span id="tenants-delete"></span><h2>Delete a Tenant<a class="headerlink" href="#delete-a-tenant" title="Permalink to this headline">¶</a></h2>
<p>To delete a tenant, make a DELETE HTTP request to URI:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="o">/</span><span class="n">tenants</span><span class="o">/{</span><span class="n">id</span><span class="o">}</span>
</pre></div>
</div>
<p>A tenant can only be deleted if its workers have been set to 0. The superadmin tenant
cannot be deleted.</p>
<div class="section" id="id3">
<h3>HTTP Responses<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="60%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Status Code</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>200 (OK)</td>
<td>If delete was successful</td>
</tr>
<tr class="row-odd"><td>403 (FORBIDDEN)</td>
<td>If the user is not allowed to delete the tenant.</td>
</tr>
<tr class="row-even"><td>409 (CONFLICT)</td>
<td>If the tenant is not in a deletable state.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id4">
<h3>Example<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>curl -X DELETE
       -H <span class="s1">&#39;Coopr-UserID:admin&#39;</span>
       -H <span class="s1">&#39;Coopr-TenantID:superadmin&#39;</span>
       -H <span class="s1">&#39;Coopr-ApiKey:&lt;apikey&gt;&#39;</span>
       http://&lt;server&gt;:&lt;port&gt;/&lt;version&gt;/tenants/my-company
</pre></div>
</div>
</div>
</div>
<div class="section" id="update-a-tenant">
<span id="tenants-modify"></span><h2>Update a Tenant<a class="headerlink" href="#update-a-tenant" title="Permalink to this headline">¶</a></h2>
<p>To update a tenant, make a PUT HTTP request to URI:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="o">/</span><span class="n">tenants</span><span class="o">/{</span><span class="n">id</span><span class="o">}</span>
</pre></div>
</div>
<p>The resource specified above respresents an individual tenant that is being updated.
Currently, the update of a tenant resource requires the complete tenant object to in
the request body. Trying to lower the max clusters or max nodes below the number
currently in use is not allowed.</p>
<div class="section" id="put-parameters">
<h3>PUT Parameters<a class="headerlink" href="#put-parameters" title="Permalink to this headline">¶</a></h3>
<p>Required Parameters</p>
<table border="1" class="docutils">
<colgroup>
<col width="60%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>tenant</td>
<td>JSON Object representing the tenant, whose fields are documented below.</td>
</tr>
<tr class="row-odd"><td>id</td>
<td>Id of the resource to be updated. Id must match.</td>
</tr>
<tr class="row-even"><td>name</td>
<td>Name of the tenant.</td>
</tr>
<tr class="row-odd"><td>description</td>
<td>Description of the tenant.</td>
</tr>
<tr class="row-even"><td>workers</td>
<td>New number of workers assigned to the tenant.</td>
</tr>
<tr class="row-odd"><td>maxClusters</td>
<td>New max number of clusters allowed for the tenant.</td>
</tr>
<tr class="row-even"><td>maxNodes</td>
<td>New max number of nodes allowed for the tenant.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id5">
<h3>HTTP Responses<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="60%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Status Code</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>200 (OK)</td>
<td>If update was successful</td>
</tr>
<tr class="row-odd"><td>400 (BAD REQUEST)</td>
<td>If the resource in the request is invalid</td>
</tr>
<tr class="row-even"><td>404 (NOT FOUND)</td>
<td>If the resource requested is not found</td>
</tr>
<tr class="row-odd"><td>409 (CONFLICT)</td>
<td>If writing the tenant resource would cause quota violations</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id6">
<h3>Example<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>curl -X PUT
       -H <span class="s1">&#39;Coopr-UserID:admin&#39;</span>
       -H <span class="s1">&#39;Coopr-TenantID:superadmin&#39;</span>
       -H <span class="s1">&#39;Coopr-ApiKey:&lt;apikey&gt;&#39;</span>
       -d <span class="s1">&#39;{</span>
<span class="s1">               &quot;tenant&quot;: {</span>
<span class="s1">                   &quot;name&quot;:&quot;my-company&quot;,</span>
<span class="s1">                   &quot;workers&quot;:20,</span>
<span class="s1">                   &quot;maxClusters&quot;:20,</span>
<span class="s1">                   &quot;maxNodes&quot;:100</span>
<span class="s1">               }</span>
<span class="s1">           }&#39;</span>
       http://&lt;server&gt;:&lt;port&gt;/&lt;version&gt;/tenants/my-company
<span class="nv">$ </span>curl -X GET
       -H <span class="s1">&#39;Coopr-UserID:admin&#39;</span>
       -H <span class="s1">&#39;Coopr-TenantID:superadmin&#39;</span>
       -H <span class="s1">&#39;Coopr-ApiKey:&lt;apikey&gt;&#39;</span>
       http://&lt;server&gt;:&lt;port&gt;/&lt;version&gt;/tenants/my-company
<span class="nv">$ </span><span class="o">{</span> <span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;my-company&quot;</span>, <span class="s2">&quot;workers&quot;</span>:20, <span class="s2">&quot;maxClusters&quot;</span>:20, <span class="s2">&quot;maxNodes&quot;</span>:100 <span class="o">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="list-all-tenants">
<span id="tenants-all-list"></span><h2>List All Tenants<a class="headerlink" href="#list-all-tenants" title="Permalink to this headline">¶</a></h2>
<p>The list of all tenants is also available for you to retrieve. The tenant list resource represents
the comprehensive set of tenants within the system.</p>
<p>To list all the tenants, make GET HTTP request to URI:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="o">/</span><span class="n">tenants</span>
</pre></div>
</div>
<div class="section" id="id7">
<h3>HTTP Responses<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="60%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Status Code</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>200 (OK)</td>
<td>Successful</td>
</tr>
<tr class="row-odd"><td>400 (BAD REQUEST)</td>
<td>If the resource uri is specified incorrectly.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id8">
<h3>Example<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>curl -X GET
       -H <span class="s1">&#39;Coopr-UserID:admin&#39;</span>
       -H <span class="s1">&#39;Coopr-TenantID:superadmin&#39;</span>
       -H <span class="s1">&#39;Coopr-ApiKey:&lt;apikey&gt;&#39;</span>
       http://&lt;server&gt;:&lt;port&gt;/&lt;version&gt;/tenants
<span class="nv">$ </span><span class="o">[</span>
    <span class="o">{</span> <span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;my-company&quot;</span>, <span class="s2">&quot;workers&quot;</span>:20, <span class="s2">&quot;maxClusters&quot;</span>:20, <span class="s2">&quot;maxNodes&quot;</span>:100 <span class="o">}</span>,
    <span class="o">{</span> <span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;companyX&quot;</span>, <span class="s2">&quot;workers&quot;</span>:100, <span class="s2">&quot;maxClusters&quot;</span>:100, <span class="s2">&quot;maxNodes&quot;</span>:1000 <span class="o">}</span>
  <span class="o">]</span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><!--
  Copyright © 2014-2015 Cask Data, Inc.

  Licensed under the Apache License, Version 2.0 (the "License"); you may not
  use this file except in compliance with the License. You may obtain a copy of
  the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
  WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
  License for the specific language governing permissions and limitations under
  the License.
-->


    
<div aria-label="globaltoc links">
<h3 class="pagenavtitle"><a href="../index.html"> Table&nbsp;of&nbsp;Contents</a></h3>
<nav class="pagenav">
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/quickstart/index.html">Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/superadmin/index.html">Super Admin Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/admin/index.html">Administration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/user/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html">Web Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../implementation.html">Under the Hood</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">FAQs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../javadocs/index.html">Javadocs</a></li>
</ul>

</nav>
</div>
  <div role="note" aria-label="downloads links">
    <h3>Downloads</h3>
    <ul class="this-page-menu">
      <li><a href="http://docs.cask.co/coopr/0.9.9/coopr-docs-0.9.9-web.zip"
            rel="nofollow">Zip Archive of Coopr Documentation</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick Search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">

<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;margin:0px auto;}
.tg td{padding:0px 20px 0px 20px;border-width:0px;overflow:hidden;word-break:normal;font-weight:normal;}
.tg th{padding:0px 20px 0px 20px;border-width:0px;overflow:hidden;word-break:normal;font-weight:normal;}
.tg .tg-s6z2{text-align:center;}
.tg .tg-0ord{text-align:right;}
.tg a{font-weight:bold;}
</style>
<table class="tg" width= 100%>
  <tr>
    <th class="tg-031e">
    
    </th>
    <th class="tg-s6z2">
        Copyright &copy; 2014-2016 Cask Data, Inc.
    
    </th>
    <th class="tg-0ord">
    
    </th>
  </tr>
</table>

    </div>
  </body>
</html>