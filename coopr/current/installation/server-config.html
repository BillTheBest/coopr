<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-55081520-3']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <title>Server Configuration &mdash; Coopr 0.9.8 Beta Documentation</title>
    
    <link rel="stylesheet" href="../_static/cdap.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.9.8 Beta',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="Coopr 0.9.8 Beta Documentation" href="../index.html" />
    <link rel="up" title="Installation Guide" href="index.html" />
    <link rel="next" title="Provisioner Configuration" href="provisioner-config.html" />
    <link rel="prev" title="Coopr Installation" href="packages.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">Index</a></li>
        <li class="right" >
          <a href="provisioner-config.html" title="Provisioner Configuration"
             accesskey="N">Next</a> |</li>
        <li class="right" >
          <a href="packages.html" title="Coopr Installation"
             accesskey="P">Previous</a> |</li>
        <li><a href="../index.html">Coopr 0.9.8 Beta Documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Installation Guide</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="server-configuration">
<span id="index-0"></span><h1>Server Configuration<a class="headerlink" href="#server-configuration" title="Permalink to this headline">¶</a></h1>
<div class="section" id="configuring-the-server">
<h2>Configuring the server<a class="headerlink" href="#configuring-the-server" title="Permalink to this headline">¶</a></h2>
<p>Coopr Server uses Zookeeper for task coordination and a database for persistent data. The server will work out of the box
without any configuration options with an in-process Zookeeper and an embedded Derby DB; however, we
strongly recommend that administrators supply their own Zookeeper quorum and database outside of Coopr for performance and
maintainability. Below we indicate how you can supply your own database (in this case MySQL server) for storage,
and the associated JDBC connector in the server configuration file.</p>
<div class="section" id="zookeeper">
<h3>Zookeeper<a class="headerlink" href="#zookeeper" title="Permalink to this headline">¶</a></h3>
<p>The zookeeper quorum, a collection of nodes running instances of Zookeeper, is specified as a comma delimited list of <tt class="docutils literal"><span class="pre">&lt;host&gt;:&lt;port&gt;</span></tt> (e.g. <tt class="docutils literal"><span class="pre">server1:2181,server2:2181,server3:2181</span></tt>).</p>
</div>
<div class="section" id="database">
<h3>Database<a class="headerlink" href="#database" title="Permalink to this headline">¶</a></h3>
<p>Coopr uses JDBC for database access. To provide your own database, and for Coopr to access it, you must specify a driver, a connection string,
a user, and a password, as shown in the following example.  We also recommend specifying a validation query to be used with jdbc connection
pooling.  The query will change based on which database you are using.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="o">&lt;?</span><span class="n">xml</span> <span class="n">version</span><span class="o">=</span><span class="s">&quot;1.0&quot;</span><span class="o">?&gt;</span>
<span class="o">&lt;?</span><span class="n">xml</span><span class="o">-</span><span class="n">stylesheet</span> <span class="n">type</span><span class="o">=</span><span class="s">&quot;text/xsl&quot;</span> <span class="n">href</span><span class="o">=</span><span class="s">&quot;configuration.xsl&quot;</span><span class="o">?&gt;</span>
<span class="o">&lt;</span><span class="n">configuration</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">property</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">server</span><span class="o">.</span><span class="na">host</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">description</span><span class="o">&gt;</span><span class="n">Specifies</span> <span class="n">the</span> <span class="n">hostname</span><span class="o">/</span><span class="n">IP</span> <span class="n">address</span> <span class="k">for</span> <span class="n">the</span> <span class="n">server</span> <span class="n">to</span> <span class="n">bind</span> <span class="n">to</span><span class="o">&lt;/</span><span class="n">description</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">property</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">property</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">server</span><span class="o">.</span><span class="na">zookeeper</span><span class="o">.</span><span class="na">quorum</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="o">:</span><span class="mi">2181</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">description</span><span class="o">&gt;</span><span class="n">Specifies</span> <span class="n">the</span> <span class="n">zookeeper</span> <span class="nl">host:</span><span class="n">port</span><span class="o">&lt;/</span><span class="n">description</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">property</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">property</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">server</span><span class="o">.</span><span class="na">jdbc</span><span class="o">.</span><span class="na">driver</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">com</span><span class="o">.</span><span class="na">mysql</span><span class="o">.</span><span class="na">jdbc</span><span class="o">.</span><span class="na">Driver</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">description</span><span class="o">&gt;</span><span class="n">Specifies</span> <span class="n">DB</span> <span class="n">driver</span><span class="o">&lt;/</span><span class="n">description</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">property</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">property</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">server</span><span class="o">.</span><span class="na">jdbc</span><span class="o">.</span><span class="na">connection</span><span class="o">.</span><span class="na">string</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="nl">jdbc:mysql:</span><span class="c1">//127.0.0.1:3306/coopr?useLegacyDatetimeCode=false&lt;/value&gt;</span>
    <span class="o">&lt;</span><span class="n">description</span><span class="o">&gt;</span><span class="n">Specifies</span> <span class="n">DB</span> <span class="n">connection</span> <span class="n">string</span><span class="o">&lt;/</span><span class="n">description</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">property</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">property</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">server</span><span class="o">.</span><span class="na">db</span><span class="o">.</span><span class="na">user</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">coopr</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">description</span><span class="o">&gt;</span><span class="n">DB</span> <span class="n">user</span><span class="o">&lt;/</span><span class="n">description</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">property</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">property</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">server</span><span class="o">.</span><span class="na">db</span><span class="o">.</span><span class="na">password</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">cooprers</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">description</span><span class="o">&gt;</span><span class="n">DB</span> <span class="n">user</span> <span class="n">password</span><span class="o">&lt;/</span><span class="n">description</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">property</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">property</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">server</span><span class="o">.</span><span class="na">jdbc</span><span class="o">.</span><span class="na">validation</span><span class="o">.</span><span class="na">query</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">SELECT</span> <span class="mi">1</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">description</span><span class="o">&gt;</span><span class="n">query</span> <span class="n">used</span> <span class="n">with</span> <span class="n">connection</span> <span class="n">pools</span> <span class="n">to</span> <span class="n">validate</span> <span class="n">a</span> <span class="n">jdbc</span> <span class="n">connection</span> <span class="n">taken</span> <span class="n">from</span> <span class="n">a</span> <span class="n">pool</span><span class="o">&lt;/</span><span class="n">description</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">property</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">configuration</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="plugin-resource-store">
<h3>Plugin Resource Store<a class="headerlink" href="#plugin-resource-store" title="Permalink to this headline">¶</a></h3>
<p>By default, the server stores plugin resources on the local file system. If you are running multiple servers for
HA, you must either configure the server to write the resources to some shared filesystem like NFS, or you must
supply your own distributed file store. To set the location that plugin resources are written to, add the following
setting to your config.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="o">&lt;</span><span class="n">property</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">server</span><span class="o">.</span><span class="na">plugin</span><span class="o">.</span><span class="na">store</span><span class="o">.</span><span class="na">localfilestore</span><span class="o">.</span><span class="na">data</span><span class="o">.</span><span class="na">dir</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;/</span><span class="n">shared</span><span class="o">/</span><span class="n">path</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">description</span><span class="o">&gt;</span><span class="n">base</span> <span class="n">path</span> <span class="n">where</span> <span class="n">plugin</span> <span class="n">resources</span> <span class="n">will</span> <span class="n">be</span> <span class="n">written</span> <span class="n">to</span><span class="o">&lt;/</span><span class="n">description</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">property</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>If you are using an alternate distributed file store, you must provide a class that implements the <tt class="docutils literal"><span class="pre">PluginStore</span></tt> interface.
See the <a class="reference internal" href="../javadocs/index.html"><em>javadocs</em></a> for more information about the interface. Once you have implemented the interface,
you must build a jar and include it in the lib directory for the server, and edit the following config setting in your config.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="o">&lt;</span><span class="n">property</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">server</span><span class="o">.</span><span class="na">plugin</span><span class="o">.</span><span class="na">store</span><span class="o">.</span><span class="na">class</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">fully</span> <span class="n">qualified</span> <span class="n">cla</span><span class="o">/</span><span class="n">shared</span><span class="o">/</span><span class="n">path</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">description</span><span class="o">&gt;</span><span class="n">fully</span> <span class="n">qualified</span> <span class="kd">class</span> <span class="nc">name</span> <span class="n">that</span> <span class="kd">implements</span> <span class="n">your</span> <span class="n">plugin</span> <span class="n">store</span><span class="o">&lt;/</span><span class="n">description</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">property</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>For more details about plugin resources, see the <a class="reference internal" href="../guide/admin/plugin-resources.html"><em>Plugin Resources Guide</em></a>.</p>
</div>
<div class="section" id="callbacks">
<h3>Callbacks<a class="headerlink" href="#callbacks" title="Permalink to this headline">¶</a></h3>
<p>The Server can be configured to run callbacks before any cluster operation begins, after an
operation succeeds, and after an operation fails. By default, no callbacks are run. Out of the
box, the Server supports sending an HTTP POST request containing cluster and job information to
configurable endpoints. You can also write your own custom callback and plug it in.
See <a class="reference internal" href="../guide/superadmin/callbacks.html"><em>Cluster Callbacks</em></a> for more information on how to write your own custom callbacks.</p>
<p>To enable HTTP POST callbacks you must specify a url to send the request to.  There is a configuration
setting for the url to use on start, success, and failure of a cluster operation. If a url is not given,
no request will be sent. By default, a request will be for every type of cluster operation, but the Server
can be configured to only send the request for certain types of cluster operations by providing a comma
separated list of operations in the configuration. An example of configuration settings is shown below.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="o">&lt;?</span><span class="n">xml</span> <span class="n">version</span><span class="o">=</span><span class="s">&quot;1.0&quot;</span><span class="o">?&gt;</span>
<span class="o">&lt;?</span><span class="n">xml</span><span class="o">-</span><span class="n">stylesheet</span> <span class="n">type</span><span class="o">=</span><span class="s">&quot;text/xsl&quot;</span> <span class="n">href</span><span class="o">=</span><span class="s">&quot;configuration.xsl&quot;</span><span class="o">?&gt;</span>
<span class="o">&lt;</span><span class="n">configuration</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">property</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">server</span><span class="o">.</span><span class="na">callback</span><span class="o">.</span><span class="na">http</span><span class="o">.</span><span class="na">start</span><span class="o">.</span><span class="na">url</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="nl">http:</span><span class="c1">//host:port/start/path&lt;/value&gt;</span>
    <span class="o">&lt;</span><span class="n">description</span><span class="o">&gt;</span><span class="n">URL</span> <span class="n">to</span> <span class="n">send</span> <span class="n">POST</span> <span class="n">request</span> <span class="n">to</span> <span class="n">at</span> <span class="n">the</span> <span class="n">start</span> <span class="n">of</span> <span class="n">a</span> <span class="n">cluster</span> <span class="n">operation</span><span class="o">&lt;/</span><span class="n">description</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">property</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">property</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">server</span><span class="o">.</span><span class="na">callback</span><span class="o">.</span><span class="na">http</span><span class="o">.</span><span class="na">start</span><span class="o">.</span><span class="na">triggers</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">cluster_create</span><span class="o">,</span><span class="n">restart_services</span><span class="o">,</span><span class="n">stop_services</span><span class="o">,</span><span class="n">cluster_configure_with_restart</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">description</span><span class="o">&gt;</span><span class="n">comma</span> <span class="n">separated</span> <span class="n">list</span> <span class="n">of</span> <span class="n">cluster</span> <span class="n">operations</span> <span class="n">that</span> <span class="n">will</span> <span class="n">trigger</span> <span class="n">the</span> <span class="n">HTTP</span> <span class="n">POST</span> <span class="n">call</span><span class="o">&lt;/</span><span class="n">description</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">property</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">property</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">server</span><span class="o">.</span><span class="na">callback</span><span class="o">.</span><span class="na">http</span><span class="o">.</span><span class="na">failure</span><span class="o">.</span><span class="na">url</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="nl">http:</span><span class="c1">//host:port/failure/path&lt;/value&gt;</span>
    <span class="o">&lt;</span><span class="n">description</span><span class="o">&gt;</span><span class="n">URL</span> <span class="n">to</span> <span class="n">send</span> <span class="n">POST</span> <span class="n">request</span> <span class="n">to</span> <span class="k">if</span> <span class="n">a</span> <span class="n">cluster</span> <span class="n">operation</span> <span class="n">fails</span><span class="o">&lt;/</span><span class="n">description</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">property</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">property</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">server</span><span class="o">.</span><span class="na">callback</span><span class="o">.</span><span class="na">http</span><span class="o">.</span><span class="na">failure</span><span class="o">.</span><span class="na">triggers</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">cluster_create</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">description</span><span class="o">&gt;</span><span class="n">comma</span> <span class="n">separated</span> <span class="n">list</span> <span class="n">of</span> <span class="n">cluster</span> <span class="n">operations</span> <span class="n">that</span> <span class="n">will</span> <span class="n">trigger</span> <span class="n">the</span> <span class="n">HTTP</span> <span class="n">POST</span> <span class="n">call</span><span class="o">&lt;/</span><span class="n">description</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">property</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">configuration</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>With the configuration above, a HTTP Post request will be sent to <a class="reference external" href="http://host:port/start/path">http://host:port/start/path</a> before the start of every
CLUSTER_CREATE, RESTART_SERVICES, STOP_SERVICES, and CLUSTER_CONFIGURE_WITH_RESTART operation. If no triggers are given,
the request is sent before the start of every cluster operation. Similarly, a HTTP POST request will be sent to
<a class="reference external" href="http://host:port/failure/path">http://host:port/failure/path</a> if a CLUSTER_CREATE operation fails. Since no success url is given, no request is sent when
cluster operations complete successfully. The full list of cluster operations are:
CLUSTER_CREATE, CLUSTER_DELETE, CLUSTER_CONFIGURE, CLUSTER_CONFIGURE_WITH_RESTART, STOP_SERVICES, START_SERVICES,
RESTART_SERVICES, and ADD_SERVICES.</p>
</div>
<div class="section" id="configuration">
<h3>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h3>
<p>A full list of available configuration settings and their default values are given below:</p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Config setting</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>server.zookeeper.quorum</td>
<td>A local value determined by an in-memory Zookeeper.</td>
<td>Zookeeper quorum for the server.</td>
</tr>
<tr class="row-odd"><td>server.zookeeper.namespace</td>
<td>&#8220;/coopr&#8221;</td>
<td>Namespace to use in Zookeeper</td>
</tr>
<tr class="row-even"><td>server.zookeeper.session.timeout.millis</td>
<td>40000</td>
<td>Zookeeper session timeout value in milliseconds.</td>
</tr>
<tr class="row-odd"><td>server.port</td>
<td>55054</td>
<td>Port for the server.</td>
</tr>
<tr class="row-even"><td>server.host</td>
<td>&#8220;localhost&#8221;</td>
<td>Hostname/IP address for the server to bind to.</td>
</tr>
<tr class="row-odd"><td>server.jdbc.driver</td>
<td>org.apache.derby.jdbc.EmbeddedDriver</td>
<td>JDBC driver to use for database operations.</td>
</tr>
<tr class="row-even"><td>server.jdbc.connection.string</td>
<td>&#8220;<a class="reference external" href="jdbc:derby:/var/coopr/data/db/coopr;create=true">jdbc:derby:/var/coopr/data/db/coopr;create=true</a>&#8220;</td>
<td>JDBC connection string to user for database operations.</td>
</tr>
<tr class="row-odd"><td>server.jdbc.validation.query</td>
<td>&#8220;VALUES 1&#8221; when using default for server.jdbc.driver (Derby), null otherwise.</td>
<td>Validation query used by JDBC connection pool to validate new DB connections.  mysql, postgres, and microsoft sql server can use &#8220;select 1&#8221;.  oracle can use &#8220;select 1 from dual&#8221;.</td>
</tr>
<tr class="row-even"><td>server.jdbc.max.active.connections</td>
<td>100</td>
<td>Maximum active JDBC connections.</td>
</tr>
<tr class="row-odd"><td>server.db.user</td>
<td>&#8220;coopr&#8221;</td>
<td>Database user.</td>
</tr>
<tr class="row-even"><td>server.db.password</td>
<td>&nbsp;</td>
<td>Database password.</td>
</tr>
<tr class="row-odd"><td>server.solver.num.threads</td>
<td>20</td>
<td>Number of threads used for solving cluster layout.</td>
</tr>
<tr class="row-even"><td>server.local.data.dir</td>
<td>&#8220;/var/coopr/data&#8221;</td>
<td>Local data directory that default in-memory Zookeeper and embedded Derby will use.</td>
</tr>
<tr class="row-odd"><td>server.task.timeout.seconds</td>
<td>1800</td>
<td>Number of seconds the server will wait before timing out a provisioner task and marking it as failed.</td>
</tr>
<tr class="row-even"><td>server.cluster.cleanup.seconds</td>
<td>180</td>
<td>Interval, in seconds, between server housekeeping runs. Housekeeping includes timing out tasks, expiring clusters, etc.</td>
</tr>
<tr class="row-odd"><td>server.netty.exec.num.threads</td>
<td>50</td>
<td>Number of execution threads for the server.</td>
</tr>
<tr class="row-even"><td>server.netty.worker.num.threads</td>
<td>20</td>
<td>Number of worker threads for the server.</td>
</tr>
<tr class="row-odd"><td>server.node.max.log.length</td>
<td>2048</td>
<td>Maximum log size in bytes for capturing stdout and stderr for actions performed on cluster nodes. Logs longer than set limit will be trimmed from the head of the file.</td>
</tr>
<tr class="row-even"><td>server.node.max.num.actions</td>
<td>200</td>
<td>Maximum number of actions saved for a node. Oldest action will be removed when actions exceeding this limit are performed on a node.</td>
</tr>
<tr class="row-odd"><td>server.max.cluster.size</td>
<td>10000</td>
<td>Maximum number of nodes that a given cluster can be created with.</td>
</tr>
<tr class="row-even"><td>server.max.action.retries</td>
<td>3</td>
<td>Maximum number of times a task gets retried when it fails.</td>
</tr>
<tr class="row-odd"><td>server.scheduler.run.interval.seconds</td>
<td>1</td>
<td>Interval, in seconds, various runs are scheduled on the server.</td>
</tr>
<tr class="row-even"><td>server.ids.start.num</td>
<td>1</td>
<td>Along with <tt class="docutils literal"><span class="pre">server.ids.increment.by</span></tt>, this setting is used to partition the ID space for <a class="reference internal" href="../guide/bcp/multi-data-center-bcp.html"><em>Multi-Datacenter High Availability</em></a>. The ID generation in a datacenter will start from this number. Each datacenter will need to have a different start number so that the IDs do not overlap. All Coopr Servers in a datacenter should share the same value of <tt class="docutils literal"><span class="pre">server.ids.start.num</span></tt>.</td>
</tr>
<tr class="row-odd"><td>server.ids.increment.by</td>
<td>1</td>
<td>Along with <tt class="docutils literal"><span class="pre">server.ids.start.num</span></tt>, this setting is used to partition the ID space for <a class="reference internal" href="../guide/bcp/multi-data-center-bcp.html"><em>Multi-Datacenter High Availability</em></a>. The IDs will increment by this number in a datacenter. All datacenters have to share the same value of <tt class="docutils literal"><span class="pre">server.ids.increment.by</span></tt> to prevent overlapping of IDs. This number has to be large enough to enable future datacenter expansion.</td>
</tr>
<tr class="row-even"><td>server.callback.class</td>
<td>co.cask.coopr.scheduler.callback.HttpPostClusterCallback</td>
<td>Class to use for executing cluster callbacks.</td>
</tr>
<tr class="row-odd"><td>server.callback.http.start.url</td>
<td>none</td>
<td>If HttpPostClusterCallback is in use, url to send cluster and job information to before cluster operations start. Leave unset if no request should be sent.</td>
</tr>
<tr class="row-even"><td>server.callback.http.success.url</td>
<td>none</td>
<td>If HttpPostClusterCallback is in use, url to send cluster and job information to after cluster operations complete successfully. Leave unset if no request should be sent.</td>
</tr>
<tr class="row-odd"><td>server.callback.http.failure.url</td>
<td>none</td>
<td>If HttpPostClusterCallback is in use, url to send cluster and job information to after cluster operations fail. Leave unset if no request should be sent.</td>
</tr>
<tr class="row-even"><td>server.callback.http.start.triggers</td>
<td>all operations</td>
<td>comma separated list of cluster operations that should trigger an HTTP POST request to be sent before start of the operation.</td>
</tr>
<tr class="row-odd"><td>server.callback.http.success.triggers</td>
<td>all operations</td>
<td>comma separated list of cluster operations that should trigger an HTTP POST request to be sent after the operation completes successfully.</td>
</tr>
<tr class="row-even"><td>server.callback.http.failure.triggers</td>
<td>all operations</td>
<td>comma separated list of cluster operations that should trigger an HTTP POST request to be sent after the operation fails.</td>
</tr>
<tr class="row-odd"><td>server.callback.http.socket.timeout</td>
<td>10000</td>
<td>socket timeout in milliseconds for http callbacks.</td>
</tr>
<tr class="row-even"><td>server.callback.http.max.connections</td>
<td>100</td>
<td>max number of concurrent http connections for callbacks. If the max is reached, the next callback to try and send a request blocks until an open connection frees up.</td>
</tr>
<tr class="row-odd"><td>server.provisioner.timeout.secs</td>
<td>120</td>
<td>seconds to wait for a provisioner heartbeat before moving its workers and deleting it.</td>
</tr>
<tr class="row-even"><td>server.provisioner.timeout.check.interval.secs</td>
<td>60</td>
<td>seconds between checks for timed out provisioners.</td>
</tr>
<tr class="row-odd"><td>server.provisioner.request.max.retries</td>
<td>2</td>
<td>max number of times to retry a failed request to a provisioner before reassigning its workers and deleting it.</td>
</tr>
<tr class="row-even"><td>server.provisioner.request.ms.between.retries</td>
<td>500</td>
<td>milliseconds to wait before retrying a failed request to a provisioner.</td>
</tr>
<tr class="row-odd"><td>server.provisioner.request.socket.timeout.ms</td>
<td>10000</td>
<td>socket timeout in milliseconds to use when making requests to provisioners.</td>
</tr>
<tr class="row-even"><td>server.metrics.queue.cache.seconds</td>
<td>10</td>
<td>Seconds to cache queue metrics in memory before recalculating. Queue metrics require walking through the queue and are therefore expensive to compute.</td>
</tr>
<tr class="row-odd"><td>server.plugin.store.class</td>
<td>co.cask.coopr.store.provisioner.LocalFilePluginStore</td>
<td>class to use to store plugin resources</td>
</tr>
<tr class="row-even"><td>server.plugin.store.localfilestore.data.dir</td>
<td>/var/coopr/data/plugins/resources</td>
<td>data directory to store plugin resources when using the local file plugin store</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><!--
  ~ Copyright 2014 Cask Data, Inc.
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License"); you may not
  ~ use this file except in compliance with the License. You may obtain a copy of
  ~ the License at
  ~
  ~ http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
  ~ WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
  ~ License for the specific language governing permissions and limitations under
  ~ the License.
  -->

<h3><a href="../index.html">Table of Contents</a></h3>
<nav>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/quickstart/index.html">Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/architecture.html">Architecture</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Installation Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="packages.html">Coopr Installation</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Server Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configuring-the-server">Configuring the server</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#zookeeper">Zookeeper</a></li>
<li class="toctree-l4"><a class="reference internal" href="#database">Database</a></li>
<li class="toctree-l4"><a class="reference internal" href="#plugin-resource-store">Plugin Resource Store</a></li>
<li class="toctree-l4"><a class="reference internal" href="#callbacks">Callbacks</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuration">Configuration</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="provisioner-config.html">Provisioner Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="standalone.html">Coopr Sandboxes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../guide/superadmin/index.html">Super Admin Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/admin/index.html">Administration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/user/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rest/index.html">Web Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../implementation.html">Under the Hood</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">FAQs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../javadocs/index.html">Javadocs</a></li>
</ul>

</nav>
  <h4>Previous Topic</h4>
  <p class="topless"><a href="packages.html"
                        title="Previous Chapter">Coopr Installation</a></p>
  <h4>Next Topic</h4>
  <p class="topless"><a href="provisioner-config.html"
                        title="Next Chapter">Provisioner Configuration</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick Search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >Index</a></li>
        <li class="right" >
          <a href="provisioner-config.html" title="Provisioner Configuration"
             >Next</a> |</li>
        <li class="right" >
          <a href="packages.html" title="Coopr Installation"
             >Previous</a> |</li>
        <li><a href="../index.html">Coopr 0.9.8 Beta Documentation</a> &raquo;</li>
          <li><a href="index.html" >Installation Guide</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        Copyright &copy; 2014 Cask Data, Inc.
    </div>
  </body>
</html>