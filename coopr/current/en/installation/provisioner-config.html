<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-55081520-3']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <title>Provisioner Configuration &mdash; Coopr 0.9.9 Documentation</title>
    
    <link rel="stylesheet" href="../_static/cdap.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    



    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.9.9',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="Coopr 0.9.9 Documentation" href="../index.html" />
    <link rel="up" title="Installation Guide" href="index.html" />
    <link rel="next" title="Coopr Sandboxes" href="standalone.html" />
    <link rel="prev" title="Server Configuration" href="server-config.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">Index</a></li>
        <li class="right" >
          <a href="standalone.html" title="Coopr Sandboxes"
             accesskey="N">Next</a> |</li>
        <li class="right" >
          <a href="server-config.html" title="Server Configuration"
             accesskey="P">Previous</a> |</li>
        
        <script type="text/javascript" src="../_static/version-menu.js"></script>
        <script src="http://docs.cask.co/coopr/json-versions.js"/></script>
        <script>window.setVersion('0.9.9');</script>
       
        <li><a href="../index.html">Coopr Documentation v0.9.9</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Installation Guide</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="provisioner-configuration">
<span id="index-0"></span><h1>Provisioner Configuration<a class="headerlink" href="#provisioner-configuration" title="Permalink to this headline">¶</a></h1>
<p>The Provisioner is a running process that manages workers and plugin resources. Workers are separate
processes that perform individual tasks for a specific tenant. Plugin resources are files or archives
that may be used to execute tasks. Chef cookbooks are examples of plugin resources. Each provisioner
has a capacity, which is the maximum number of workers it can manage. When configuring capacity for
your provisioner, assume each worker takes 256mb of memory. CPU usage is negligible. The provisioner
periodically sends a heartbeat to the server to tell the system it is alive. Live provisioners may
get requests from the server to add or remove workers for different tenants.</p>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<p>Shown below is an example configuration (<code class="docutils literal"><span class="pre">provisioner-site.xml</span></code>) with some of the optional settings:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;configuration&gt;</span>
  <span class="nt">&lt;property&gt;</span>
    <span class="nt">&lt;name&gt;</span>provisioner.capacity<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;value&gt;</span>10<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;description&gt;</span>Max number of running workers for this provisioner<span class="nt">&lt;/description&gt;</span>
  <span class="nt">&lt;/property&gt;</span>
  <span class="nt">&lt;property&gt;</span>
    <span class="nt">&lt;name&gt;</span>provisioner.server.uri<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;value&gt;</span>http://localhost:55055<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;description&gt;</span>URI of server to connect to<span class="nt">&lt;/description&gt;</span>
  <span class="nt">&lt;/property&gt;</span>
  <span class="nt">&lt;property&gt;</span>
    <span class="nt">&lt;name&gt;</span>provisioner.data.dir<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;value&gt;</span>/var/coopr/data/provisioner/data<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;description&gt;</span>Provisioner storage directory for plugin data resources<span class="nt">&lt;/description&gt;</span>
  <span class="nt">&lt;/property&gt;</span>
  <span class="nt">&lt;property&gt;</span>
    <span class="nt">&lt;name&gt;</span>provisioner.work.dir<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;value&gt;</span>/var/coopr/data/provisioner/work<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;description&gt;</span>Provisioner working directory<span class="nt">&lt;/description&gt;</span>
  <span class="nt">&lt;/property&gt;</span>
  <span class="nt">&lt;property&gt;</span>
    <span class="nt">&lt;name&gt;</span>provisioner.register.ip<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;value&gt;</span>127.0.0.1<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;description&gt;</span>Routable IP for the server to call back to this provisioner&#39;s API<span class="nt">&lt;/description&gt;</span>
  <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/configuration&gt;</span>
</pre></div>
</div>
<p><strong>Notes:</strong> Changes to the <code class="docutils literal"><span class="pre">provisioner-site.xml</span></code> file require a restart of the provisioner.
The provisioner will run with no properties set (an empty <code class="docutils literal"><span class="pre">provisioner-site.xml</span></code> file)
as all properties have defaults set.</p>
</div>
<div class="section" id="running-provisioner-with-ssl">
<h2>Running Provisioner with SSL<a class="headerlink" href="#running-provisioner-with-ssl" title="Permalink to this headline">¶</a></h2>
<p>To configure the provisioner to support server with SSL, add or update this property in <code class="docutils literal"><span class="pre">provisioner-site.xml</span></code>:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;property&gt;</span>
  <span class="nt">&lt;name&gt;</span>provisioner.server.uri<span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;value&gt;</span>https://localhost:55055<span class="nt">&lt;/value&gt;</span>
  <span class="nt">&lt;description&gt;</span>URI of server to connect to<span class="nt">&lt;/description&gt;</span>
<span class="nt">&lt;/property&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>A full list of available configuration settings and their default values are given below:</p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Config setting</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">provisioner.server.uri</span></code></td>
<td><code class="docutils literal"><span class="pre">http://localhost:55055</span></code></td>
<td>URI of server to connect to</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">provisioner.bind.ip</span></code></td>
<td><code class="docutils literal"><span class="pre">0.0.0.0</span></code></td>
<td>Local IP provisioner should listen on</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">provisioner.bind.port</span></code></td>
<td><code class="docutils literal"><span class="pre">55056</span></code></td>
<td>Local Port provisioner should listen on</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">provisioner.register.ip</span></code></td>
<td>&nbsp;</td>
<td>Routable IP for the server to call back to this provisioner&#8217;s API; if left empty,
the provisioner will attempt to auto-detect</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">provisioner.daemonize</span></code></td>
<td><code class="docutils literal"><span class="pre">false</span></code></td>
<td>Run provisioner as a daemon. Ensure you also specify a log directory</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">provisioner.data.dir</span></code></td>
<td><code class="docutils literal"><span class="pre">/var/coopr/data/provisioner/data</span></code></td>
<td>Provisioner storage directory for plugin data resources</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">provisioner.work.dir</span></code></td>
<td><code class="docutils literal"><span class="pre">/var/coopr/data/provisioner/work</span></code></td>
<td>Provisioner working directory</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">provisioner.capacity</span></code></td>
<td><code class="docutils literal"><span class="pre">10</span></code></td>
<td>Max number of running workers for this provisioner; assume each worker takes 256mb of memory</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">provisioner.heartbeat.interval</span></code></td>
<td><code class="docutils literal"><span class="pre">10</span></code></td>
<td>Interval in seconds to send heartbeat to server</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">provisioner.log.dir</span></code></td>
<td>&nbsp;</td>
<td>Provisioner log directory</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">provisioner.log.rotation.shift.age</span></code></td>
<td><code class="docutils literal"><span class="pre">7</span></code></td>
<td>number of old log files to keep, or frequency of rotation (daily, weekly, or monthly)</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">provisioner.log.rotation.shift.size</span></code></td>
<td><code class="docutils literal"><span class="pre">10485760</span></code></td>
<td>maximum logfile size. only applies when shift.age is a number</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">provisioner.log.level</span></code></td>
<td><code class="docutils literal"><span class="pre">info</span></code></td>
<td>log level; one of: debug, info, warn, error, fatal</td>
</tr>
</tbody>
</table>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><!--
  Copyright © 2014-2015 Cask Data, Inc.

  Licensed under the Apache License, Version 2.0 (the "License"); you may not
  use this file except in compliance with the License. You may obtain a copy of
  the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
  WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
  License for the specific language governing permissions and limitations under
  the License.
-->


    
<div aria-label="globaltoc links">
<h3 class="pagenavtitle"><a href="../index.html"> Table&nbsp;of&nbsp;Contents</a></h3>
<nav class="pagenav">
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/quickstart/index.html">Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/architecture.html">Architecture</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Installation Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="packages.html">Coopr Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="server-config.html">Server Configuration</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Provisioner Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#example">Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-provisioner-with-ssl">Running Provisioner with SSL</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuration">Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="standalone.html">Coopr Sandboxes</a></li>
<li class="toctree-l2"><a class="reference internal" href="openstack-config.html">Openstack Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="ui-config.html">UI Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="authentication.html">Authentication Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade.html">Coopr Upgrade</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../guide/superadmin/index.html">Super Admin Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/admin/index.html">Administration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/user/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rest/index.html">Web Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../implementation.html">Under the Hood</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">FAQs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../javadocs/index.html">Javadocs</a></li>
</ul>

</nav>
</div>
  <h4>Previous Topic</h4>
  <p class="topless"><a href="server-config.html"
                        title="Previous Chapter">Server Configuration</a></p>
  <h4>Next Topic</h4>
  <p class="topless"><a href="standalone.html"
                        title="Next Chapter">Coopr Sandboxes</a></p>
  <div role="note" aria-label="downloads links">
    <h3>Downloads</h3>
    <ul class="this-page-menu">
      <li><a href="http://docs.cask.co/coopr/0.9.9/coopr-docs-0.9.9-web.zip"
            rel="nofollow">Zip Archive of Coopr Documentation</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick Search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">

<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;margin:0px auto;}
.tg td{padding:0px 20px 0px 20px;border-width:0px;overflow:hidden;word-break:normal;font-weight:normal;}
.tg th{padding:0px 20px 0px 20px;border-width:0px;overflow:hidden;word-break:normal;font-weight:normal;}
.tg .tg-s6z2{text-align:center;}
.tg .tg-0ord{text-align:right;}
.tg a{font-weight:bold;}
</style>
<table class="tg" width= 100%>
  <tr>
    <th class="tg-031e">Previous Topic: 
    <a title="Server Configuration" href="server-config.html" />Server Configuration</a>&nbsp;&nbsp;
    
    </th>
    <th class="tg-s6z2">
        Copyright &copy; 2014-2016 Cask Data, Inc.
    
    </th>
    <th class="tg-0ord">&nbsp;&nbsp;Next Topic:
    <a title="Coopr Sandboxes" href="standalone.html" />Coopr Sandboxes</a>
    
    </th>
  </tr>
</table>

    </div>
  </body>
</html>