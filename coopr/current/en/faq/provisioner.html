<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-55081520-3']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <title>Coopr Provisioner &mdash; Coopr 0.9.9 Documentation</title>
    
    <link rel="stylesheet" href="../_static/cdap.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    



    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.9.9',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="Coopr 0.9.9 Documentation" href="../index.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">Index</a></li>
        
        <script type="text/javascript" src="../_static/version-menu.js"></script>
        <script src="http://docs.cask.co/coopr/json-versions.js"/></script>
        <script>window.setVersion('0.9.9');</script>
       
        <li><a href="../index.html">Coopr Documentation v0.9.9</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <span class="target" id="faq-provisioner"></span><div class="section" id="coopr-provisioner">
<span id="index-0"></span><h1>Coopr Provisioner<a class="headerlink" href="#coopr-provisioner" title="Permalink to this headline">¶</a></h1>
<div class="section" id="when-something-goes-wrong-how-can-i-look-at-the-logs">
<span id="faq-provisioner-1"></span><h2>When something goes wrong, how can I look at the logs?<a class="headerlink" href="#when-something-goes-wrong-how-can-i-look-at-the-logs" title="Permalink to this headline">¶</a></h2>
<p>When a user provisions a cluster, the logs for the nodes that fail are reported at node level, making
it easier to investigate the node level errors.</p>
</div>
<div class="section" id="how-many-provisioners-should-i-run">
<span id="faq-provisioner-2"></span><h2>How many provisioners should I run?<a class="headerlink" href="#how-many-provisioners-should-i-run" title="Permalink to this headline">¶</a></h2>
<p>A good rule of thumb is:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">C</span> <span class="o">*</span> <span class="n">N</span> <span class="o">*</span> <span class="n">n</span> <span class="o">/</span> <span class="n">S</span>
</pre></div>
</div>
<p>Where:</p>
<p>C = Number of concurrent cluster creations you need to support</p>
<p>N = Average number of nodes per cluster</p>
<p>n = Average number of services per cluster node</p>
<p>S = Average total number of services in a cluster</p>
<p>Since only one operation can be running on a node at any given time, you will never need more provisioners
than the number of concurrent node creations you need to support. However, because work on a cluster is broken up into stages, and because
not all cluster nodes will be busy in each stage, it is usually fine to have less than the total number of created nodes.
The formula above tries to capture the average number of tasks per cluster creation stage times the number of clusters being created at any given time.</p>
<p>For example, if you need to support 10 concurrent cluster creations, on average each node across the clusters
contains 4 services, on average each cluster contains 8 services, and each cluster is on average 10 nodes
in size, so a good starting point is 10 * 10 * 4 / 8 = 50 provisioners.  Ultimately, if your provisioners are always busy, you probably want to add more.
If they are mostly idle, you probably want to decrease number. With a lot of provisioners, you will want to edit the number of worker threads in the Coopr
Server accordingly.</p>
<p>Memory limits should also be considered when deciding on the number of provisioners to run. On average, each provisioner
requires roughly 200MB of memory, hence, you may want to consider your system specifications
when allocating the number of provisioners.</p>
</div>
<div class="section" id="can-i-increase-the-number-of-provisioners-on-the-fly">
<span id="faq-provisioner-3"></span><h2>Can I increase the number of provisioners on the fly?<a class="headerlink" href="#can-i-increase-the-number-of-provisioners-on-the-fly" title="Permalink to this headline">¶</a></h2>
<p>No, you can&#8217;t in this release. We intend to support it in a future release.</p>
</div>
<div class="section" id="how-many-resources-does-each-provisioner-need">
<span id="faq-provisioner-4"></span><h2>How many resources does each provisioner need?<a class="headerlink" href="#how-many-resources-does-each-provisioner-need" title="Permalink to this headline">¶</a></h2>
<p>Provisioners are very light-weight daemons. They are state-less and require less
amount of memory. Nor are they CPU bound. For most of the time, they are idle, waiting for operations to
finish on a remote host. Currently, each Provisioner can handle one task at a time. In future releases,
the Provisioner will support performing multiple tasks currently.</p>
</div>
<div class="section" id="is-it-possible-for-multiple-provisioners-to-perform-operations-on-the-same-node-at-the-same-time">
<span id="faq-provisioner-5"></span><h2>Is it possible for multiple provisioners to perform operations on the same node at the same time?<a class="headerlink" href="#is-it-possible-for-multiple-provisioners-to-perform-operations-on-the-same-node-at-the-same-time" title="Permalink to this headline">¶</a></h2>
<p>During normal operations, there is only one Provisioner performing operation on the machine. In case
of failure, the previous operation would be timed out, and a new operation would be started.</p>
</div>
<div class="section" id="can-i-run-different-types-of-provisioners-at-the-same-time">
<span id="faq-provisioner-6"></span><h2>Can I run different types of provisioners at the same time?<a class="headerlink" href="#can-i-run-different-types-of-provisioners-at-the-same-time" title="Permalink to this headline">¶</a></h2>
<p>Currently, the system doesn&#8217;t support registration of multiple types of provisoners. All Provisioners are currently
expected to be of the same type.</p>
</div>
<div class="section" id="can-i-customize-provisioners">
<span id="faq-provisioner-7"></span><h2>Can I customize provisioners?<a class="headerlink" href="#can-i-customize-provisioners" title="Permalink to this headline">¶</a></h2>
<p>Yes, you can. Please look for more information <a class="reference internal" href="../guide/superadmin/plugins.html"><em>here</em></a></p>
</div>
<div class="section" id="what-happens-when-i-stop-a-provisioner-while-it-is-performing-a-task">
<span id="faq-provisioner-8"></span><h2>What happens when I stop a provisioner while it is performing a task?<a class="headerlink" href="#what-happens-when-i-stop-a-provisioner-while-it-is-performing-a-task" title="Permalink to this headline">¶</a></h2>
<p>The provisioner will attempt to finish any task it is performing before stopping.  This means it may take minutes
before a provisioner shuts itself down after receiving a kill signal.</p>
</div>
<div class="section" id="can-the-chef-solo-automator-plugin-use-a-chef-server">
<span id="faq-provisioner-9"></span><h2>Can the Chef Solo Automator plugin use a Chef server?<a class="headerlink" href="#can-the-chef-solo-automator-plugin-use-a-chef-server" title="Permalink to this headline">¶</a></h2>
<p>Currently, it does not. The current version uses only chef-solo, however, future version of Coopr will support both chef-solo and
chef-client.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><!--
  Copyright © 2014-2015 Cask Data, Inc.

  Licensed under the Apache License, Version 2.0 (the "License"); you may not
  use this file except in compliance with the License. You may obtain a copy of
  the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
  WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
  License for the specific language governing permissions and limitations under
  the License.
-->


    
<div aria-label="globaltoc links">
<h3 class="pagenavtitle"><a href="../index.html"> Table&nbsp;of&nbsp;Contents</a></h3>
<nav class="pagenav">
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/quickstart/index.html">Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/superadmin/index.html">Super Admin Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/admin/index.html">Administration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/user/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rest/index.html">Web Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../implementation.html">Under the Hood</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html">FAQs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../javadocs/index.html">Javadocs</a></li>
</ul>

</nav>
</div>
  <div role="note" aria-label="downloads links">
    <h3>Downloads</h3>
    <ul class="this-page-menu">
      <li><a href="http://docs.cask.co/coopr/0.9.9/coopr-docs-0.9.9-web.zip"
            rel="nofollow">Zip Archive of Coopr Documentation</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick Search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">

<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;margin:0px auto;}
.tg td{padding:0px 20px 0px 20px;border-width:0px;overflow:hidden;word-break:normal;font-weight:normal;}
.tg th{padding:0px 20px 0px 20px;border-width:0px;overflow:hidden;word-break:normal;font-weight:normal;}
.tg .tg-s6z2{text-align:center;}
.tg .tg-0ord{text-align:right;}
.tg a{font-weight:bold;}
</style>
<table class="tg" width= 100%>
  <tr>
    <th class="tg-031e">
    
    </th>
    <th class="tg-s6z2">
        Copyright &copy; 2014-2016 Cask Data, Inc.
    
    </th>
    <th class="tg-0ord">
    
    </th>
  </tr>
</table>

    </div>
  </body>
</html>