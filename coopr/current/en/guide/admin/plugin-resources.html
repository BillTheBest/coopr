<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-55081520-3']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <title>Plugin Resources &mdash; Coopr 0.9.9 Documentation</title>
    
    <link rel="stylesheet" href="../../_static/cdap.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    



    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.9.9',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="Coopr 0.9.9 Documentation" href="../../index.html" />
    <link rel="up" title="Administration Guide" href="index.html" />
    <link rel="next" title="User Guide" href="../user/index.html" />
    <link rel="prev" title="Macros" href="macros.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">Index</a></li>
        <li class="right" >
          <a href="../user/index.html" title="User Guide"
             accesskey="N">Next</a> |</li>
        <li class="right" >
          <a href="macros.html" title="Macros"
             accesskey="P">Previous</a> |</li>
        
        <script type="text/javascript" src="../../_static/version-menu.js"></script>
        <script src="http://docs.cask.co/coopr/json-versions.js"/></script>
        <script>window.setVersion('0.9.9');</script>
       
        <li><a href="../../index.html">Coopr Documentation v0.9.9</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Administration Guide</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="plugin-resources">
<span id="index-0"></span><h1>Plugin Resources<a class="headerlink" href="#plugin-resources" title="Permalink to this headline">¶</a></h1>
<p>There is out of the box support for creating Hadoop clusters. Internally, the installation, configuration, and management of Hadoop
services is handled on the provisioner by the Chef Automator plugin. The Chef Automator plugin uses out of the box cookbooks to
execute all tasks it needs to perform. However, administrators may wish to manage other sorts of clusters using other sorts of
services. For example, you may want to create an Elastic Search template to create an indexing and search cluster.
In order to allow simple and easy expansion of service and template capabilities, plugins are able to define different
types of resources they can use to perform tasks. For example, the Chef Automator plugin defines 3 types of resources:
cookbooks, data bags, and roles. We include several cookbooks out of the box, but the plugin resource system allows administrators to
add and manage any number of cookbooks, enabling support of any service desired. Similarly, plugin resources can be used on the
provider plugin side to upload and manage tenant specific data, such as user keys or credentials.</p>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>Plugin resources can only be managed by the administrator of a tenant.  As with all other entities, plugin resources are isolated to within
a tenant. Users from one tenant cannot see plugin resources in another tenant. The basic flow is that an administrator uploads resources
as needed. Each time a resource is uploaded, a new version of it is created. These resources are not available for use until the administrator
stages a specific version of the resource, and then performs a sync to push all staged versions from the server to provisioners. If a resource
needs to be removed, it can be recalled, which means it will be unavailable for use after the next sync.  Thus there are four
possible states in the lifecycle of a resource: inactive, staged, active, and recalled.</p>
<p>An inactive resource is not available to provisioners and is not scheduled to be available any time in the future. A staged resource is not
available to provisioners, but is scheduled to be available after the next resource sync. An active resource is available to provisioners
and will continue to be available after the next sync. A recalled resource is available to provisioners, but scheduled to be removed from
provisioners after the next sync.</p>
<p>Generally, an administrator will upload some resources, stage the versions that should be active, then sync all resources. As resources
evolve and update, new versions are uploaded and synced. If a resource ever needs to be removed completely, it is recalled, synced,
and finally deleted. All resource operations can be performed through the UI or directly through the REST APIs documented <a class="reference internal" href="../../rest/plugins.html"><em>here</em></a></p>
</div>
<div class="section" id="uploading-resources">
<h2>Uploading Resources<a class="headerlink" href="#uploading-resources" title="Permalink to this headline">¶</a></h2>
<p>Plugin resources can only be uploaded by a tenant administrator. It can be done through the UI, or through the REST API
documented <a class="reference internal" href="../../rest/plugins.html"><em>here</em></a>. Each time a resource is uploaded, a new version of the resource is created. Subsequent
interactions require the version of a resource as well as the name. Archive resources are assumed to be constructed such that
the name of the resource is a top level folder in the expanded archive. A newly uploaded resource begins in the &#8216;inactive&#8217; state.
An inactive resource is not visible to provisioners, meaning it cannot be used. It is also not scheduled to be used at any point
in the future.</p>
</div>
<div class="section" id="staging-resources">
<h2>Staging Resources<a class="headerlink" href="#staging-resources" title="Permalink to this headline">¶</a></h2>
<p>Before a resource can be made available for use by provisioners, a specific version of the resource must be staged.
In the &#8216;staged&#8217; state, a resource is still not available to provisioners, but is scheduled to be pushed out after the next sync.</p>
<p>Staging an inactive resource will move it to the staged state. Additionally, if there is an active version of the resource, it
will be moved to the recalled state. Similarly, if there is already a staged version, it will be moved to the inactive state.
For example, suppose version 2 of the mysql cookbook is active. Staging version 3 of the mysql cookbook will move version 2 from
the active state to the recalled state. If version 4 of the mysql cookbook is now staged, version 2 will move back to the inactive
state.</p>
<p>Staging a recalled resource will move it back to the active state.
Staging a staged resource has no effect. Staging an active resource also has no effect.</p>
</div>
<div class="section" id="recalling-resources">
<h2>Recalling Resources<a class="headerlink" href="#recalling-resources" title="Permalink to this headline">¶</a></h2>
<p>The admin can remove a resource from use by recalling it. Recalling the active version of a resource moves it to the recalled state.
A resource in the recalled state is still available for use by provisioners, but will be removed after the next sync. Recalling
a staged resource will move it back to the inactive state. Recalling a recalled resource has no effect. Recalling an inactive resource
also has no effect.</p>
</div>
<div class="section" id="syncing-resources">
<h2>Syncing Resources<a class="headerlink" href="#syncing-resources" title="Permalink to this headline">¶</a></h2>
<p>Syncing resources will make all staged resources active and all recalled resources inactive. Any active resources will stay active,
and any inactive resources will stay inactive. Any tasks that were already running when the sync began will continue to run with
the old resources. However, all new tasks are guaranteed to use the new active set of resources.</p>
</div>
<div class="section" id="tools">
<h2>Tools<a class="headerlink" href="#tools" title="Permalink to this headline">¶</a></h2>
<p>There is also a resource upload tool provided in the provisioner package. You can use it to create an archive from a directory on
your local filesystem and upload it to the server. You can see usage information by running:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>/opt/coopr/provisioner/embedded/bin/ruby /opt/coopr/provisioner/bin/data-uploader.rb -h
Usage: /opt/coopr/provisioner/bin/data-uploader.rb <span class="o">[</span>options<span class="o">]</span> &lt;action&gt; &lt;<span class="nb">local</span>-path&gt; &lt;remote-target&gt;
   -u, --uri URI                    Server URI, defaults to ENV<span class="o">[</span><span class="s1">&#39;COOPR_SERVER_URI&#39;</span><span class="o">]</span> <span class="k">else</span> <span class="s2">&quot;http://localhost:55054&quot;</span>
   -t, --tenant TENANT              Tenant, defaults to ENV<span class="o">[</span><span class="s1">&#39;COOPR_TENANT&#39;</span><span class="o">]</span> <span class="k">else</span> <span class="s2">&quot;superadmin&quot;</span>
   -U, --user USER                  User, defaults to ENV<span class="o">[</span><span class="s1">&#39;COOPR_API_USER&#39;</span><span class="o">]</span> <span class="k">else</span> <span class="s2">&quot;admin&quot;</span>
   -q, --quiet                      Suppress all non-error output
   --cert-path CERTPATH             Trust certificate path
   --cert-pass CERTPASS             Trust certificate password

Required Arguments:
        &lt;action&gt;: one of upload, stage, or sync:
                    upload: uploads a single resource to the server
                    stage: uploads and stages a single resource to the server
                    sync: uploads and stages a single resource, <span class="k">then</span> executes a sync on all staged resources
        &lt;<span class="nb">local</span>-path&gt;: path to the <span class="nb">local </span>copy of the resource to upload
        &lt;remote-target&gt;: api path defining the resource

Example:
 /opt/coopr/provisioner/bin/data-uploader.rb -u http://localhost:55054 -t superadmin -U admin sync ./my/local/cookbooks/hadoop automatortypes/chef-solo/cookbooks/hadoop
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you are uploading an archive of a directory, the top level directory of your unpacked archive must be named exactly the same as your resource name. For example, if you are uploading an archive of a directory named &#8216;mycookbook&#8217;, you <em>must</em> name your resource &#8216;mycookbook&#8217; in order for it to be used correctly. This issue will be fixed in the next release.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><!--
  Copyright © 2014-2015 Cask Data, Inc.

  Licensed under the Apache License, Version 2.0 (the "License"); you may not
  use this file except in compliance with the License. You may obtain a copy of
  the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
  WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
  License for the specific language governing permissions and limitations under
  the License.
-->


    
<div aria-label="globaltoc links">
<h3 class="pagenavtitle"><a href="../../index.html"> Table&nbsp;of&nbsp;Contents</a></h3>
<nav class="pagenav">
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/index.html">Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/index.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../superadmin/index.html">Super Admin Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Administration Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="ui.html">Administration User Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="macros.html">Macros</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Plugin Resources</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#uploading-resources">Uploading Resources</a></li>
<li class="toctree-l3"><a class="reference internal" href="#staging-resources">Staging Resources</a></li>
<li class="toctree-l3"><a class="reference internal" href="#recalling-resources">Recalling Resources</a></li>
<li class="toctree-l3"><a class="reference internal" href="#syncing-resources">Syncing Resources</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tools">Tools</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rest/index.html">Web Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../implementation.html">Under the Hood</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/index.html">FAQs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release-notes/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../javadocs/index.html">Javadocs</a></li>
</ul>

</nav>
</div>
  <h4>Previous Topic</h4>
  <p class="topless"><a href="macros.html"
                        title="Previous Chapter">Macros</a></p>
  <h4>Next Topic</h4>
  <p class="topless"><a href="../user/index.html"
                        title="Next Chapter">User Guide</a></p>
  <div role="note" aria-label="downloads links">
    <h3>Downloads</h3>
    <ul class="this-page-menu">
      <li><a href="http://docs.cask.co/coopr/0.9.9/coopr-docs-0.9.9-web.zip"
            rel="nofollow">Zip Archive of Coopr Documentation</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick Search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">

<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;margin:0px auto;}
.tg td{padding:0px 20px 0px 20px;border-width:0px;overflow:hidden;word-break:normal;font-weight:normal;}
.tg th{padding:0px 20px 0px 20px;border-width:0px;overflow:hidden;word-break:normal;font-weight:normal;}
.tg .tg-s6z2{text-align:center;}
.tg .tg-0ord{text-align:right;}
.tg a{font-weight:bold;}
</style>
<table class="tg" width= 100%>
  <tr>
    <th class="tg-031e">Previous Topic: 
    <a title="Macros" href="macros.html" />Macros</a>&nbsp;&nbsp;
    
    </th>
    <th class="tg-s6z2">
        Copyright &copy; 2014-2016 Cask Data, Inc.
    
    </th>
    <th class="tg-0ord">&nbsp;&nbsp;Next Topic:
    <a title="User Guide" href="../user/index.html" />User Guide</a>
    
    </th>
  </tr>
</table>

    </div>
  </body>
</html>